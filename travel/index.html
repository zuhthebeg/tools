<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MV8KQGJF');</script>
<!-- End Google Tag Manager -->

<title>?ÄÎß??¨Ìñâ ?ºÏ†ï (??Ï§?</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
<style>
  :root{
    --accent:#2b7a78;
    --muted:#6b6b6b;
    --card:#ffffff;
    --bg:#f6f8f9;
    --shadow: 0 6px 18px rgba(34,34,34,0.08);
    --important: #e74c3c;
    font-family: "Noto Sans KR", "Noto Sans TC", Arial, sans-serif;
  }
  body{
    margin:0;
    background:var(--bg);
    color:#222;
    line-height:1.45;
    -webkit-font-smoothing:antialiased;
    padding:28px;
  }
  h1{
    margin:0 0 10px 0;
    font-size:20px;
    color:var(--accent);
  }
  p.lead{
    margin:0 0 22px 0;
    color:var(--muted);
    font-size:14px;
  }

  /* Grid container for days */
  .days {
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    gap:18px;
  }

  @media (max-width:980px){
    .days{ grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width:640px){
    .days{ grid-template-columns: 1fr; padding-bottom:40px; }
  }

  .day-card{
    background:var(--card);
    border-radius:12px;
    padding:14px;
    box-shadow:var(--shadow);
    min-height: 150px;
    display:flex;
    flex-direction:column;
  }
  .day-head{
    display:flex;
    justify-content:space-between;
    align-items:center;
    margin-bottom:10px;
  }
  .day-title{
    font-weight:700;
    font-size:15px;
  }
  .day-sub{
    font-size:12px;
    color:var(--muted);
  }

  /* timeline list */
  .timeline{
    list-style:none;
    padding:0;
    margin:6px 0 0 0;
    display:flex;
    flex-direction:column;
    gap:10px;
    flex:1;
    overflow:auto;
  }
  .item{
    position: relative;
    display:grid;
    grid-template-columns:78px 1fr;
    gap:10px;
    align-items:start;
    padding:8px;
    border-radius:8px;
    transition:background .12s ease, transform .12s ease;
    cursor: grab;
  }
  .item:hover{ transform: translateY(-2px); background: #fbfdff; }
  .item.highlight {
    background-color: #fffbe5;
  }
  .item.important .content {
      border-left: 3px solid var(--important);
  }

  .time{
    font-weight:700;
    font-size:13px;
    color:var(--accent);
  }
  .content{
    background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(250,250,250,0.8));
    padding:8px 10px;
    border-radius:8px;
    border:1px solid #efefef;
  }
  .k{
    display:block;
    font-weight:600;
  }
  .c{
    display:block;
    color:var(--muted);
    font-size:13px;
    margin-top:4px;
  }
  .note{
    display:block;
    margin-top:6px;
    color:#a33;
    font-size:12px;
  }
  .item-link {
    display: block;
    margin-top: 4px;
    font-size: 12px;
    color: var(--accent);
    text-decoration: underline;
    cursor: pointer;
  }

  /* footer / metadata */
  .meta{
    margin-top:12px;
    font-size:12px;
    color:var(--muted);
  }

  .controls {
    display: flex;
    gap: 5px;
    margin-top: 10px;
  }

  .btn {
    background-color: var(--accent);
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 12px;
  }

  .btn-delete-x {
    position: absolute;
    top: 5px;
    right: 5px;
    width: 20px;
    height: 20px;
    background-color: #eee;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    color: #888;
    line-height: 1;
  }
  .btn-delete-x:hover {
      background-color: #ddd;
      color: #333;
  }

  .important-toggle {
      margin-top: 5px;
  }


  /* Pretty print when printing */
  @media print{
    body{ padding:6mm; background:#fff; }
    .day-card{ box-shadow:none; page-break-inside:avoid; }
  }
</style>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MV8KQGJF" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

  <header>
    <h1>?ÄÎß??¨Ìñâ ?ºÏ†ï?????ú¬∑Ï§ë Î≥ëÍ∏∞</h1>
    <p class="lead">Í∏∞Í∞Ñ: 11/13(Î™? ~ 11/16(?? ???úÍ∞Ñ?ÄÎ≥ÑÎ°ú Î≥¥Í∏∞ ?ΩÍ≤å ?ïÎ¶¨?àÏäµ?àÎã§. (?úÍµ≠??/ ‰∏?ñá)</p>
    <div class="controls">
        <button class="btn" onclick="exportData()">?¥Î≥¥?¥Í∏∞</button>
        <button class="btn" onclick="document.getElementById('import-file').click()">Í∞Ä?∏Ïò§Í∏?/button>
        <input type="file" id="import-file" style="display: none" onchange="importData(event)" accept=".json">
    </div>
  </header>

  <section class="days">
  </section>

  <footer style="margin-top:18px;">
    <div style="font-size:13px;color:var(--muted)">
	    copychu@2025
    </div>
  </footer>

<script>
const initialData = {
  "d13": {
    "title": "11/13 (Î™?",
    "subTitle": "11??3?•Ôºà?±ÂõõÔº?,
    "daySub": "Ï∂úÎ∞ú??/ ?∫Áôº??,
    "meta": "?ôÏÜå: ?∞ÂåóÂ∏ÇËê¨???Ê≠?òåË°ó‰∫åÊÆ?24??(Airbnb)",
    "items": [
      { "time": "10:30", "k": "?∏Ï≤úÍ≥µÌï≠ T2 ?ÑÏ∞© / ‰ªÅÂ∑ùÊ©üÂ†¥ T2 ?µÈÅî", "c": "Í≥µÌï≠Î≤ÑÏä§ ?àÏïΩ / ?êÁ¥ÑÊ©üÂ†¥Â∑¥Â£´", "link": "", "linkText": "", "important": false },
      { "time": "12:30", "k": "Ï∂úÎ∞ú / ?∫Áôº", "c": "ÎπÑÌñâÍ∏?Ï∂úÎ∞ú ?úÍ∞Ñ / ?™Áè≠?∫Áôº?ÇÈñì", "link": "", "linkText": "", "important": true },
      { "time": "14:20", "k": "?Ä?§ÏúÑ??Í≥µÌï≠ T1 ?ÑÏ∞© / Ê°ÉÂúíÊ©üÂ†¥ T1 ?µÈÅî", "c": "?Ä?¥Î≤†???¥Îèô Ï§ÄÎπ?/ Ê∫ñÂÇô?çÂ??∞Âåó", "link": "", "linkText": "", "important": true },
      { "time": "15:13??5:49", "k": "Í≥µÌï≠Ï≤†ÎèÑ ???Ä?¥Î≤†?¥Ïó≠ (??NT$160) / Ê©üÂ†¥?∑ÈÅã ???∞ÂåóËªäÁ´ôÔºàÁ¥ÑNT$160Ôº?, "c": "ÍµêÌÜµÏπ¥Îìú Ï§ÄÎπ?/ Ê∫ñÂÇô‰∫§ÈÄöÂç°", "link": "", "linkText": "", "important": false },
      { "time": "??16:30", "k": "Airbnb Ï≤¥ÌÅ¨??(?¨ËèØ?Ä Ê≠?òåË°ó‰∫åÊÆ?24?? / Airbnb ?•‰Ωè", "c": "Ï£ºÏÜå: ?∞ÂåóÂ∏ÇËê¨???Ê≠?òåË°ó‰∫åÊÆ?24??, "link": "", "linkText": "", "important": false },
      { "time": "18:00", "k": "?¨Ïò§Î≥¥Ìã∞Ïø?/ Â∞èÂïµ‰∏ãÁè≠ (?åÍ∑úÎ™?Ïπ¥Ìéò ?êÎäî ?ºÏ†ï)", "c": "??18:00 Î∞©Î¨∏ ?àÏ†ï / ?êË®à18:00", "link": "", "linkText": "", "important": false },
      { "time": "?Ä??, "k": "?ºÏãú??Î∞©Î¨∏ / ‰∫´ÊõºÂ§úÂ∏Ç", "c": "?¥Îîî ?ºÏãú?? ?ÑÏπò ÎØ∏Ï†ï / Â§úÂ∏Ç?∞Èªû?™ÂÆö", "note": "?ºÏãú???ÑÏπòÎ•??ïÌïòÎ©?Ï∂îÍ? ?ÖÎç∞?¥Ìä∏ Í∞Ä??/ ?•Á¢∫ÂÆöÂ§úÂ∏ÇÂú∞ÈªûÂèØ?çÊõ¥??, "link": "", "linkText": "", "important": false }
    ]
  },
  "d14": {
    "title": "11/14 (Í∏?",
    "subTitle": "11??4?•Ôºà?±‰∫îÔº?,
    "daySub": "?§Ì? & ÏßÄ?∞Ì? ?¨Ïñ¥ / ?ÅÂàÜ & ‰πù‰ªΩ ?äÈÅä",
    "items": [
      { "time": "?§Ï†Ñ", "k": "?ÄÎßåÏãù ?ÑÏπ® (Ë±ÜÊºø/?ãÈ§Ö ?? / ?∞ÁÅ£?©È§ê", "c": "Î∞±Ï¢Ö??Ï∂îÏ≤ú Í∞ÄÍ≤?Í≥†Î†§ / ?®Ëñ¶Â∫óÂ?ÔºàÎ∞±Ï¢ÖÏõêÔº?, "link": "", "linkText": "", "important": false },
      { "time": "13:00", "k": "?§Ì? ??è¨ & ÏßÄ?∞Ì? ?¨Ïñ¥ Ï∂úÎ∞ú / ?ÅÂàÜ?ëÂ∏É & ‰πù‰ªΩ ‰∏Ä?•ÈÅä ?∫Áôº", "c": "BÏΩîÏä§: ?§Ì? & ?§Ì? ??è¨ & ÏßÄ?∞Ì? ?õÍ±∞Î¶?/ Ë°åÁ®ã?ÖÊã¨?ÅÂàÜ?ëÂ∏É?á‰πù‰ªΩËÄÅË°ó", "link": "", "linkText": "", "important": false },
      { "time": "20:00", "k": "?Ä?¥Î≤†??Î≥µÍ? / ËøîÂõû?∞Âåó", "c": "?ïÏÉÅ?ÅÏúºÎ°?20:00Í≤??ÑÎ£å ?àÏ†ï / ?êË®àÁ¥?0:00ÁµêÊùü", "link": "", "linkText": "", "important": false },
      { "time": "?Ä??, "k": "?Ä?ÅÏãù?? ?±ÁÇí ?êÎäî ?ÑÏ? ?ùÎãπ / ?±ÁÇíÈ§êÂª≥", "c": "?ÑÏπò ÎØ∏Ï†ï / ?∞Èªû?™ÂÆö", "link": "", "linkText": "", "important": false }
    ]
  },
  "d15": {
    "title": "11/15 (??",
    "subTitle": "11??5?•Ôºà?±ÂÖ≠Ôº?,
    "daySub": "?Ä?¥Î≤†???úÎÇ¥ / ?∞ÂåóÂ∏ÇÂÖß",
    "items": [
      { "time": "?§Ï†Ñ", "k": "?ÄÎßåÏãù ?ÑÏπ®: Ë±ÜÊºø?ãÈ§Ö / ?∞ÁÅ£?©È§ê", "c": "?∏Ïïà???ÑÏπ® / ËºïÈ¨Ü?ÑÊó©??, "link": "", "linkText": "", "important": false },
      { "time": "?§ÌõÑ", "k": "?Ä?¥Î≤†??101 Î∞©Î¨∏ / ?ÉË? ?∞Âåó101", "c": "Í¥ÄÍ¥?Î∞??ºÌïë / ËßÄ?âËàáË≥ºÁâ©", "link": "", "linkText": "", "important": false },
      { "time": "19:00", "k": "ÏΩòÏÑú??Í¥Ä??/ ?ÉÂä†?≥Ê®Ç??, "c": "?∞Ïºì Î∞??•ÏÜå ?ïÏù∏ ?ÑÏöî / ?ÄÁ¢∫Ë™ç?ÄÁ•®Ëàá?¥Âú∞", "link": "", "linkText": "", "important": true },
      { "time": "?Ä??, "k": "?ºÏãú??/ ÎßàÏÇ¨ÏßÄ ?†ÌÉù Í∞Ä??/ Â§úÂ∏Ç?ñÊåâ??, "c": "ÎßàÏÇ¨ÏßÄ ?àÏïΩ ???§ÌõÑ ?úÍ∞Ñ ?ïÏù∏ / ?•Ë¶Å?âÊë©Ë´ãÁ¢∫Ë™çÊôÇ??, "link": "", "linkText": "", "important": false }
    ]
  },
  "d16": {
    "title": "11/16 (??",
    "subTitle": "11??6?•Ôºà?±Êó•Ôº?,
    "daySub": "Í∑ÄÍµ?ùº / ?ûÁ®ã??,
    "meta": "Ï≤¥ÌÅ¨?ÑÏõÉ/Ï≤¥ÌÅ¨???úÍ∞Ñ: Ï≤¥ÌÅ¨?ÑÏõÉ 11:00 ??Í∂åÏû• / ?•‰Ωè?áÈÄÄ?øÊôÇ?ìË´ã‰æùAirbnbË¶èÂÆö?∫‰∏ª",
    "items": [
      { "time": "?§Ï†Ñ", "k": "??û†, ?¨Ïú†Î°úÏö¥ ?ÑÏπ® / ?°Êôö‰∏ÄÈªûÔºå?†Èñí?©È§ê", "c": "Ë±ÜÊºø?ãÈ§Ö Ï∂îÏ≤ú / ?®Ëñ¶Ë±ÜÊºø?ãÈ§Ö", "link": "", "linkText": "", "important": false },
      { "time": "11:30??2:00", "k": "Ï≤¥ÌÅ¨?ÑÏõÉ & Ï∫êÎ¶¨??Î≥¥Í? (Î°úÏª§) / ?Ä??& ÂØÑÊîæË°åÊùéÔºàÁΩÆ?©Ê´ÉÔº?, "c": "12:00ÍπåÏ? Î°úÏª§ ?êÎäî ?ôÏÜå??Î≥¥Í? / Âª∫Ë?12:00?çÂØÑ??, "link": "", "linkText": "", "important": false },
      { "time": "14:00 (Í∂åÏû•)", "k": "ÎßàÏÇ¨ÏßÄ (?†ÌÉù) / ?âÊë©ÔºàÂèØ?∏Ôºâ", "c": "?§ÌõÑ ?úÍ∞Ñ Í∂åÏû• / Âª∫Ë?ÂÆâÊéí?®‰∏ã??, "link": "", "linkText": "", "important": false },
      { "time": "18:00", "k": "?Ä?§ÏúÑ??Í≥µÌï≠ T1 ?ÑÏ∞© / Ê°ÉÂúíÊ©üÂ†¥ T1 ?µÈÅî", "c": "Í≥µÌï≠ ?¥Îèô ?úÍ∞Ñ ?ïÎ≥¥ / Âª∫Ë??êÁïôË∂≥Â§†?ÇÈñì?çÂ?Ê©üÂ†¥", "link": "", "linkText": "", "important": true },
      { "time": "20:00", "k": "Ï∂úÎ∞ú (Í∑ÄÍµ? / ?∫ÁôºÔºàËøî?ûÈüì?ãÔºâ", "c": "ÎπÑÌñâÍ∏?Ï∂úÎ∞ú ?úÍ∞Ñ ?ïÏù∏ / Á¢∫Ë™ç?™Áè≠?ÇÈñì", "link": "", "linkText": "", "important": true }
    ]
  }
};

let travelData;

document.addEventListener('DOMContentLoaded', () => {
  loadData();
  renderSchedule();
  highlightCurrentTime();
  setInterval(highlightCurrentTime, 60000); // Check every minute
});

function loadData() {
  const savedData = localStorage.getItem('travelData');
  if (savedData) {
    travelData = JSON.parse(savedData);
  } else {
    travelData = initialData;
  }
}

function saveData() {
  localStorage.setItem('travelData', JSON.stringify(travelData));
}

function renderSchedule() {
    const daysContainer = document.querySelector('.days');
    daysContainer.innerHTML = '';

    for (const dayId in travelData) {
        const day = travelData[dayId];
        const dayCard = document.createElement('article');
        dayCard.className = 'day-card';
        dayCard.setAttribute('aria-labelledby', dayId);

        const dayHead = document.createElement('div');
        dayHead.className = 'day-head';
        dayHead.innerHTML = `
            <div>
                <div id="${dayId}" class="day-title">${day.title}</div>
                <div class="day-sub">${day.subTitle}</div>
            </div>
            <div class="day-sub">${day.daySub}</div>
        `;

        const timeline = document.createElement('ul');
        timeline.className = 'timeline';

        day.items.forEach((item, index) => {
            const itemEl = document.createElement('li');
            itemEl.className = `item ${item.important ? 'important' : ''}`;
            itemEl.dataset.dayId = dayId;
            itemEl.dataset.itemIndex = index;
            itemEl.innerHTML = `
                <button class="btn-delete-x" onclick="deleteItem('${dayId}', ${index})">√ó</button>
                <div class="time" contenteditable="true" onblur="updateItem('${dayId}', ${index}, 'time', this.innerText)">${item.time}</div>
                <div class="content">
                    <span class="k" contenteditable="true" onblur="updateItem('${dayId}', ${index}, 'k', this.innerText)">${item.k}</span>
                    <span class="c" contenteditable="true" onblur="updateItem('${dayId}', ${index}, 'c', this.innerText)">${item.c}</span>
                    ${item.note ? `<span class="note" contenteditable="true" onblur="updateItem('${dayId}', ${index}, 'note', this.innerText)">${item.note}</span>` : ''}
                    ${item.link ? `<a href="${item.link}" target="_blank" class="item-link" contenteditable="true" onblur="updateItem('${dayId}', ${index}, 'link', this.innerText)">${item.linkText || item.link}</a>` : `<span class="item-link" contenteditable="true" onblur="updateItem('${dayId}', ${index}, 'link', this.innerText)">ÎßÅÌÅ¨ Ï∂îÍ?</span>`}
                    <div class="important-toggle">
                        <label><input type="checkbox" ${item.important ? 'checked' : ''} onchange="toggleImportant('${dayId}', ${index})"> Ï§ëÏöî</label>
                    </div>
                </div>
            `;
            timeline.appendChild(itemEl);
        });

        const controls = document.createElement('div');
        controls.className = 'controls';
        controls.innerHTML = `<button class="btn" onclick="addItem('${dayId}')">?ºÏ†ï Ï∂îÍ?</button>`;

        dayCard.appendChild(dayHead);
        dayCard.appendChild(timeline);
        dayCard.appendChild(controls);

        if (day.meta) {
            const meta = document.createElement('div');
            meta.className = 'meta';
            meta.textContent = day.meta;
            dayCard.appendChild(meta);
        }

        daysContainer.appendChild(dayCard);

        new Sortable(timeline, {
            animation: 150,
            onEnd: function (evt) {
                const dayId = evt.item.dataset.dayId;
                const oldIndex = evt.oldIndex;
                const newIndex = evt.newIndex;
                const item = travelData[dayId].items.splice(oldIndex, 1)[0];
                travelData[dayId].items.splice(newIndex, 0, item);
                saveData();
                renderSchedule(); // Re-render to update indices
            },
        });
    }
}

function updateItem(dayId, itemIndex, field, value) {
  const itemElement = document.querySelector(`.item[data-day-id='${dayId}'][data-item-index='${itemIndex}']`);
  const actualIndex = Array.from(itemElement.parentNode.children).indexOf(itemElement);

  if (field === 'link') {
    travelData[dayId].items[actualIndex]['link'] = value;
    travelData[dayId].items[actualIndex]['linkText'] = value;
  } else {
    travelData[dayId].items[actualIndex][field] = value;
  }
  saveData();
}

function addItem(dayId) {
  travelData[dayId].items.push({ time: "???úÍ∞Ñ", k: "???ºÏ†ï", c: "?¥Ïö©", link: "", linkText: "", important: false });
  saveData();
  renderSchedule();
}

function deleteItem(dayId, itemIndex) {
    const itemElement = document.querySelector(`.item[data-day-id='${dayId}'][data-item-index='${itemIndex}']`);
    const actualIndex = Array.from(itemElement.parentNode.children).indexOf(itemElement);

  if (confirm('???ºÏ†ï????†ú?òÏãúÍ≤†Ïäµ?àÍπå?')) {
    travelData[dayId].items.splice(actualIndex, 1);
    saveData();
    renderSchedule();
  }
}

function toggleImportant(dayId, itemIndex) {
    const itemElement = document.querySelector(`.item[data-day-id='${dayId}'][data-item-index='${itemIndex}']`);
    const actualIndex = Array.from(itemElement.parentNode.children).indexOf(itemElement);
    travelData[dayId].items[actualIndex].important = !travelData[dayId].items[actualIndex].important;
    saveData();
    renderSchedule();
}

function highlightCurrentTime() {
  const now = new Date();
  const currentDay = now.getDate();
  const currentHour = now.getHours();
  const currentMinute = now.getMinutes();

  document.querySelectorAll('.item').forEach(item => {
    item.classList.remove('highlight');
  });

  const dayId = `d${13 + (currentDay - 13)}`;
  if (travelData[dayId]) {
    travelData[dayId].items.forEach((item, index) => {
      const timeParts = item.time.match(/(\d{2}):(\d{2})/);
      if (timeParts) {
        const hour = parseInt(timeParts[1], 10);
        const minute = parseInt(timeParts[2], 10);
        if (hour === currentHour && minute <= currentMinute && currentMinute < minute + 60) {
          const itemElement = document.querySelector(`.item[data-day-id="${dayId}"][data-item-index="${index}"]`);
          if (itemElement) {
            itemElement.classList.add('highlight');
          }
        }
      }
    });
  }
}

function exportData() {
    const dataStr = JSON.stringify(travelData, null, 2);
    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);

    const exportFileDefaultName = 'travel-data.json';

    let linkElement = document.createElement('a');
    linkElement.setAttribute('href', dataUri);
    linkElement.setAttribute('download', exportFileDefaultName);
    linkElement.click();
}

function importData(event) {
    const file = event.target.files[0];
    if (!file) {
        return;
    }

    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const importedData = JSON.parse(e.target.result);
            travelData = importedData;
            saveData();
            renderSchedule();
        } catch (error) {
            alert('Í∞Ä?∏Ïò§Í∏??§Ìå®: ?†Ìö®?òÏ? ?äÏ? JSON ?åÏùº?ÖÎãà??');
        }
    };
    reader.readAsText(file);
}

</script>
</body>
</html>