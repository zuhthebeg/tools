<!DOCTYPE html>
<html lang="ko" id="htmlRoot">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ëŠë‚Œê°€ì‚¬ â€” Feel the Lyrics</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤</text></svg>">
<style>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&family=Outfit:wght@400;600;800&display=swap');

:root {
  --bg: #0a0a14;
  --card: rgba(255,255,255,0.04);
  --card-border: rgba(255,255,255,0.08);
  --neon-pink: #ff2d78;
  --neon-cyan: #00e5ff;
  --neon-amber: #ffc857;
  --text: #e8e8f0;
  --text-dim: #8888a0;
  --radius: 16px;
  --glow-pink: 0 0 20px rgba(255,45,120,0.3);
  --glow-cyan: 0 0 20px rgba(0,229,255,0.3);
}

* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: 'Noto Sans KR', 'Outfit', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100dvh;
  overflow-x: hidden;
  -webkit-tap-highlight-color: transparent;
}

/* Animated background */
body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse at 20% 50%, rgba(255,45,120,0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, rgba(0,229,255,0.06) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 80%, rgba(255,200,87,0.04) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

.app { position: relative; z-index: 1; max-width: 600px; margin: 0 auto; padding: 16px; padding-bottom: 100px; }

/* Header */
.header { text-align: center; padding: 24px 0 16px; }
.header h1 {
  font-family: 'Outfit', sans-serif;
  font-size: 2rem;
  font-weight: 800;
  background: linear-gradient(135deg, var(--neon-pink), var(--neon-cyan));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  letter-spacing: -0.02em;
}
.header p { color: var(--text-dim); font-size: 0.85rem; margin-top: 4px; }

/* Navigation */
.nav-back {
  display: inline-flex; align-items: center; gap: 6px;
  color: var(--neon-cyan); font-size: 0.9rem; cursor: pointer;
  padding: 8px 0; margin-bottom: 8px; border: none; background: none;
  font-family: inherit;
}
.nav-back:hover { text-decoration: underline; }

/* Search */
.search-bar {
  display: flex; gap: 8px; margin-bottom: 20px;
}
.search-bar input {
  flex: 1; padding: 12px 16px; border-radius: 12px;
  background: var(--card); border: 1px solid var(--card-border);
  color: var(--text); font-size: 1rem; font-family: inherit;
  outline: none; transition: border-color 0.2s;
}
.search-bar input:focus { border-color: var(--neon-pink); }
.search-bar input::placeholder { color: var(--text-dim); }

/* Song Grid */
.song-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }

.song-card {
  background: var(--card); border: 1px solid var(--card-border);
  border-radius: var(--radius); padding: 16px; cursor: pointer;
  transition: all 0.25s ease; position: relative; overflow: hidden;
}
.song-card:hover {
  border-color: var(--neon-pink);
  box-shadow: var(--glow-pink);
  transform: translateY(-2px);
}
.song-card .album-art {
  width: 100%; aspect-ratio: 1; border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 2.5rem; margin-bottom: 10px;
}
.song-card .title {
  font-weight: 700; font-size: 0.9rem;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.song-card .artist {
  color: var(--text-dim); font-size: 0.78rem; margin-top: 2px;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.song-card .badge {
  position: absolute; top: 8px; right: 8px;
  background: var(--neon-pink); color: #fff; font-size: 0.65rem;
  padding: 2px 6px; border-radius: 6px; font-weight: 700;
}

/* Add Song Card */
.song-card.add-card {
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  border-style: dashed; min-height: 180px;
}
.song-card.add-card .plus { font-size: 2rem; color: var(--text-dim); }
.song-card.add-card .label { color: var(--text-dim); font-size: 0.85rem; margin-top: 6px; }

/* Song Detail */
.song-info {
  display: flex; gap: 16px; align-items: flex-start;
  margin-bottom: 20px; padding: 16px;
  background: var(--card); border: 1px solid var(--card-border);
  border-radius: var(--radius);
}
.song-info .art {
  width: 80px; height: 80px; border-radius: 12px; flex-shrink: 0;
  display: flex; align-items: center; justify-content: center;
  font-size: 2.5rem;
}
.song-info .meta { flex: 1; min-width: 0; }
.song-info .meta h2 { font-size: 1.2rem; font-weight: 800; }
.song-info .meta .artist { color: var(--text-dim); font-size: 0.9rem; }
.song-info .links { display: flex; gap: 6px; margin-top: 8px; flex-wrap: wrap; }
.song-info .links a {
  font-size: 0.75rem; padding: 3px 8px; border-radius: 8px;
  text-decoration: none; color: var(--text); font-weight: 600;
  background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.12);
  transition: 0.2s;
}
.song-info .links a:hover { background: rgba(255,255,255,0.15); }

/* Toolbar */
.toolbar {
  display: flex; gap: 8px; margin-bottom: 16px; flex-wrap: wrap;
}
.toolbar button, .btn {
  padding: 8px 14px; border-radius: 10px; border: 1px solid var(--card-border);
  background: var(--card); color: var(--text); font-family: inherit;
  font-size: 0.82rem; cursor: pointer; transition: 0.2s; font-weight: 600;
}
.toolbar button:hover, .btn:hover {
  border-color: var(--neon-cyan); box-shadow: var(--glow-cyan);
}
.btn-primary {
  background: linear-gradient(135deg, var(--neon-pink), #ff6b9d) !important;
  border-color: var(--neon-pink) !important; color: #fff !important;
}
.btn-primary:hover { box-shadow: var(--glow-pink) !important; }
.btn-sm { padding: 6px 10px; font-size: 0.75rem; }

/* Line Editor */
.lines-container { display: flex; flex-direction: column; gap: 2px; }

.line-row {
  display: grid; grid-template-columns: 1fr 1fr; gap: 1px;
  border-radius: 8px; overflow: hidden; background: rgba(255,255,255,0.02);
  transition: 0.15s;
}
.line-row:hover { background: rgba(255,255,255,0.05); }
.line-row .original, .line-row .korean {
  padding: 10px 12px; font-size: 0.88rem; min-height: 42px;
  border: none; background: transparent; color: var(--text);
  font-family: inherit; outline: none; resize: none;
  line-height: 1.5;
}
.line-row .original {
  color: var(--text-dim); background: rgba(255,255,255,0.02);
  border-right: 1px solid rgba(255,255,255,0.05);
}
.line-row .korean { color: var(--neon-amber); font-weight: 700; }
.line-row .korean:focus { background: rgba(255,200,87,0.05); }
.line-row .korean::placeholder { color: rgba(255,200,87,0.3); font-weight: 400; }

.line-header {
  display: grid; grid-template-columns: 1fr 1fr; gap: 1px;
  padding: 8px 12px; font-size: 0.75rem; color: var(--text-dim);
  font-weight: 700; text-transform: uppercase; letter-spacing: 0.05em;
}

/* Sections */
.section-label {
  font-size: 0.75rem; color: var(--neon-pink); font-weight: 700;
  text-transform: uppercase; letter-spacing: 0.1em;
  margin: 16px 0 8px; padding-left: 4px;
}

/* Karaoke Mode */
.karaoke-overlay {
  position: fixed; inset: 0; z-index: 1000;
  background: #050510;
  display: none; flex-direction: column;
  align-items: center; justify-content: center;
  padding: 24px; text-align: center;
  cursor: pointer; user-select: none;
}
.karaoke-overlay.active { display: flex; }
.karaoke-overlay .k-original {
  font-size: 1.1rem; color: var(--text-dim); margin-bottom: 16px;
  max-width: 90vw;
}
.karaoke-overlay .k-korean {
  font-size: 2.8rem; font-weight: 900; line-height: 1.3;
  color: var(--neon-amber);
  text-shadow: 0 0 40px rgba(255,200,87,0.4);
  max-width: 90vw;
  transition: opacity 0.3s;
}
.karaoke-overlay .k-progress {
  position: absolute; bottom: 40px;
  color: var(--text-dim); font-size: 0.85rem;
}
.karaoke-overlay .k-hint {
  position: absolute; bottom: 16px;
  color: rgba(255,255,255,0.2); font-size: 0.75rem;
}
.karaoke-overlay .k-close {
  position: absolute; top: 16px; right: 16px;
  font-size: 1.5rem; color: var(--text-dim);
  cursor: pointer; background: none; border: none;
  font-family: inherit;
}

/* Add/Edit Song Form */
.form-group { margin-bottom: 14px; }
.form-group label {
  display: block; font-size: 0.8rem; color: var(--text-dim);
  margin-bottom: 4px; font-weight: 600;
}
.form-group input, .form-group textarea {
  width: 100%; padding: 10px 14px; border-radius: 10px;
  background: var(--card); border: 1px solid var(--card-border);
  color: var(--text); font-family: inherit; font-size: 0.9rem;
  outline: none; transition: border-color 0.2s;
}
.form-group input:focus, .form-group textarea:focus { border-color: var(--neon-cyan); }
.form-group textarea { min-height: 120px; resize: vertical; line-height: 1.6; }

/* Options row */
.options-row {
  display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 16px;
}
.option-chip {
  padding: 6px 12px; border-radius: 20px; font-size: 0.78rem;
  border: 1px solid var(--card-border); background: var(--card);
  color: var(--text-dim); cursor: pointer; transition: 0.2s;
  font-family: inherit; font-weight: 600;
}
.option-chip.active {
  border-color: var(--neon-cyan); color: var(--neon-cyan);
  background: rgba(0,229,255,0.1); box-shadow: var(--glow-cyan);
}

/* Export modal */
.modal-overlay {
  position: fixed; inset: 0; z-index: 900;
  background: rgba(0,0,0,0.7); display: none;
  align-items: center; justify-content: center;
  padding: 24px;
}
.modal-overlay.active { display: flex; }
.modal-box {
  background: #15152a; border: 1px solid var(--card-border);
  border-radius: var(--radius); padding: 24px;
  width: 100%; max-width: 500px; max-height: 80dvh;
  overflow-y: auto;
}
.modal-box h3 { margin-bottom: 16px; font-size: 1.1rem; }
.modal-box pre {
  background: var(--card); padding: 16px; border-radius: 10px;
  font-family: 'Noto Sans KR', monospace; font-size: 0.85rem;
  line-height: 1.8; white-space: pre-wrap; word-break: break-all;
  color: var(--neon-amber); max-height: 50dvh; overflow-y: auto;
}
.modal-actions { display: flex; gap: 8px; margin-top: 16px; }

/* AI Loading */
.ai-loading {
  text-align: center; padding: 32px;
  color: var(--neon-cyan); font-size: 0.9rem;
}
.ai-loading .spinner {
  width: 32px; height: 32px; border: 3px solid rgba(0,229,255,0.2);
  border-top-color: var(--neon-cyan); border-radius: 50%;
  animation: spin 0.8s linear infinite; margin: 0 auto 12px;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Toast */
.toast {
  position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%);
  background: var(--neon-cyan); color: #000; font-weight: 700;
  padding: 10px 20px; border-radius: 10px; font-size: 0.85rem;
  z-index: 2000; opacity: 0; transition: opacity 0.3s;
  pointer-events: none;
}
.toast.show { opacity: 1; }

/* Responsive */
@media (max-width: 400px) {
  .song-grid { grid-template-columns: 1fr 1fr; gap: 8px; }
  .song-card { padding: 12px; }
  .song-card .album-art { font-size: 2rem; }
  .karaoke-overlay .k-korean { font-size: 2rem; }
}

/* Scrollbar */
::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }

/* Lang switcher */
.lang-switcher {
  display: flex; justify-content: center; gap: 4px; margin-bottom: 8px;
}
.lang-btn {
  padding: 4px 10px; border-radius: 8px; border: 1px solid var(--card-border);
  background: var(--card); color: var(--text-dim); font-size: 0.75rem;
  cursor: pointer; font-family: inherit; font-weight: 600; transition: 0.2s;
}
.lang-btn.active {
  border-color: var(--neon-cyan); color: var(--neon-cyan);
  background: rgba(0,229,255,0.1);
}

/* Fade transition */
.view { animation: fadeIn 0.2s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
</style>
</head>
<body>

<div class="app" id="app"></div>
<div class="karaoke-overlay" id="karaoke"></div>
<div class="modal-overlay" id="exportModal"></div>
<div class="toast" id="toast"></div>

<script>
const LLM_URL = 'https://llm.cocy.io/v2/chat/completions';

// --- i18n ---
const LANGS = ['ko','en','ja','zh-TW'];
const LANG_LABELS = { ko:'í•œêµ­ì–´', en:'English', ja:'æ—¥æœ¬èª', 'zh-TW':'ç¹é«”ä¸­æ–‡' };
const I18N = {
  ko: {
    title: 'ëŠë‚Œê°€ì‚¬',
    subtitle: 'ì™¸êµ­ ë…¸ë˜ë¥¼ ë‚´ ì–¸ì–´ ë°œìŒìœ¼ë¡œ ë”°ë¼ ë¶€ë¥´ì',
    searchPlaceholder: 'ê³¡ ë˜ëŠ” ì•„í‹°ìŠ¤íŠ¸ ê²€ìƒ‰...',
    addSong: 'ìƒˆ ê³¡ ë“±ë¡',
    backToList: 'â† ëª©ë¡ìœ¼ë¡œ',
    aiSection: 'ğŸ¤– AI ëŠë‚Œê°€ì‚¬ ìƒì„±',
    optStretch: 'ğŸµ ìŒì ˆ ëŠ˜ë¦¬ê¸°',
    optStress: 'ğŸ’ª ê°•ì„¸ ê°•ì¡°',
    optRhyme: 'ğŸ¶ ë¼ì„ ëŠë‚Œ',
    btnAi: 'âœ¨ AI ìƒì„±',
    btnKaraoke: 'ğŸ¤ ë…¸ë˜ë°©',
    btnAddLine: '+ ì¤„ ì¶”ê°€',
    btnExport: 'ğŸ“¤ ë‚´ë³´ë‚´ê¸°',
    colOriginal: 'ì›ë¬¸ ê°€ì‚¬',
    colPhonetic: 'í•œê¸€ ëŠë‚Œê°€ì‚¬',
    phoneticPlaceholder: 'í•œê¸€ ë°œìŒ ì…ë ¥...',
    addTitle: 'ê³¡ ì œëª©',
    addArtist: 'ì•„í‹°ìŠ¤íŠ¸',
    addYoutube: 'YouTube ë§í¬',
    addSpotify: 'Spotify ë§í¬',
    addLyrics: 'ê°€ì‚¬ (í•œ ì¤„ì— í•˜ë‚˜ì”©)',
    btnRegister: 'ë“±ë¡í•˜ê¸°',
    btnCancel: 'ì·¨ì†Œ',
    newSongTitle: 'ğŸµ ìƒˆ ê³¡ ë“±ë¡',
    toastRegistered: 'ê³¡ì´ ë“±ë¡ë˜ì—ˆì–´ìš”!',
    toastDeleted: 'ì‚­ì œ ì™„ë£Œ',
    toastCopied: 'ë³µì‚¬ ì™„ë£Œ!',
    toastAiDone: 'âœ¨ ëŠë‚Œê°€ì‚¬ ìƒì„± ì™„ë£Œ!',
    toastNoLyrics: 'ì›ë¬¸ ê°€ì‚¬ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”',
    toastNoPhonetic: 'ë°œìŒ ê°€ì‚¬ë¥¼ ë¨¼ì € ì…ë ¥í•´ì£¼ì„¸ìš”',
    toastRequired: 'ì œëª©ê³¼ ì•„í‹°ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”',
    confirmDelete: 'ì´ ê³¡ì„ ì‚­ì œí• ê¹Œìš”?',
    aiLoading: 'AIê°€ í•œê¸€ ëŠë‚Œê°€ì‚¬ë¥¼ ë§Œë“¤ê³  ìˆì–´ìš”...',
    aiFailed: 'ìƒì„± ì‹¤íŒ¨',
    aiRetry: 'ì§ì ‘ ì…ë ¥í•˜ê±°ë‚˜ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”',
    exportTitle: 'ğŸ“¤ ë‚´ë³´ë‚´ê¸°',
    exportCopy: 'ğŸ“‹ í…ìŠ¤íŠ¸ ë³µì‚¬',
    exportClose: 'ë‹«ê¸°',
    karaokeEnd: 'ğŸ¤ ë! ì˜í–ˆì–´ìš”!',
    karaokeTapBack: 'íƒ­í•˜ì—¬ ëŒì•„ê°€ê¸°',
    karaokeHint: 'íƒ­ ë˜ëŠ” â†’í‚¤ë¡œ ë‹¤ìŒ',
    notEntered: '(ë¯¸ì…ë ¥)',
  },
  en: {
    title: 'Feel Lyrics',
    subtitle: 'Sing foreign songs with phonetics in your language',
    searchPlaceholder: 'Search song or artist...',
    addSong: 'Add Song',
    backToList: 'â† Back',
    aiSection: 'ğŸ¤– AI Phonetic Generation',
    optStretch: 'ğŸµ Stretch Syllables',
    optStress: 'ğŸ’ª Stress Marks',
    optRhyme: 'ğŸ¶ Rhyme Feel',
    btnAi: 'âœ¨ AI Generate',
    btnKaraoke: 'ğŸ¤ Karaoke',
    btnAddLine: '+ Add Line',
    btnExport: 'ğŸ“¤ Export',
    colOriginal: 'Original Lyrics',
    colPhonetic: 'English Phonetics',
    phoneticPlaceholder: 'Type phonetics...',
    addTitle: 'Song Title',
    addArtist: 'Artist',
    addYoutube: 'YouTube Link',
    addSpotify: 'Spotify Link',
    addLyrics: 'Lyrics (one line each)',
    btnRegister: 'Register',
    btnCancel: 'Cancel',
    newSongTitle: 'ğŸµ Add New Song',
    toastRegistered: 'Song added!',
    toastDeleted: 'Deleted',
    toastCopied: 'Copied!',
    toastAiDone: 'âœ¨ Phonetics generated!',
    toastNoLyrics: 'Enter original lyrics first',
    toastNoPhonetic: 'Enter phonetics first',
    toastRequired: 'Title and artist required',
    confirmDelete: 'Delete this song?',
    aiLoading: 'AI is generating phonetics...',
    aiFailed: 'Generation failed',
    aiRetry: 'Try again or type manually',
    exportTitle: 'ğŸ“¤ Export',
    exportCopy: 'ğŸ“‹ Copy Text',
    exportClose: 'Close',
    karaokeEnd: 'ğŸ¤ Great job!',
    karaokeTapBack: 'Tap to go back',
    karaokeHint: 'Tap or â†’ for next',
    notEntered: '(empty)',
  },
  ja: {
    title: 'ãƒ•ã‚£ãƒ¼ãƒ«ãƒªãƒªãƒƒã‚¯ã‚¹',
    subtitle: 'å¤–å›½ã®æ­Œã‚’ã‚«ã‚¿ã‚«ãƒŠç™ºéŸ³ã§æ­ŒãŠã†',
    searchPlaceholder: 'æ›²ã¾ãŸã¯ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆæ¤œç´¢...',
    addSong: 'æ–°æ›²è¿½åŠ ',
    backToList: 'â† ä¸€è¦§ã¸',
    aiSection: 'ğŸ¤– AI ã‚«ã‚¿ã‚«ãƒŠç™ºéŸ³ç”Ÿæˆ',
    optStretch: 'ğŸµ éŸ³ç¯€ã‚’ä¼¸ã°ã™',
    optStress: 'ğŸ’ª ã‚¢ã‚¯ã‚»ãƒ³ãƒˆå¼·èª¿',
    optRhyme: 'ğŸ¶ ãƒ©ã‚¤ãƒ æ„Ÿ',
    btnAi: 'âœ¨ AIç”Ÿæˆ',
    btnKaraoke: 'ğŸ¤ ã‚«ãƒ©ã‚ªã‚±',
    btnAddLine: '+ è¡Œè¿½åŠ ',
    btnExport: 'ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
    colOriginal: 'åŸæ–‡æ­Œè©',
    colPhonetic: 'ã‚«ã‚¿ã‚«ãƒŠç™ºéŸ³',
    phoneticPlaceholder: 'ã‚«ã‚¿ã‚«ãƒŠã§ç™ºéŸ³ã‚’å…¥åŠ›...',
    addTitle: 'æ›²å',
    addArtist: 'ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆ',
    addYoutube: 'YouTubeãƒªãƒ³ã‚¯',
    addSpotify: 'Spotifyãƒªãƒ³ã‚¯',
    addLyrics: 'æ­Œè©ï¼ˆ1è¡Œãšã¤ï¼‰',
    btnRegister: 'ç™»éŒ²',
    btnCancel: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«',
    newSongTitle: 'ğŸµ æ–°æ›²è¿½åŠ ',
    toastRegistered: 'æ›²ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸï¼',
    toastDeleted: 'å‰Šé™¤å®Œäº†',
    toastCopied: 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼',
    toastAiDone: 'âœ¨ ç™ºéŸ³ç”Ÿæˆå®Œäº†ï¼',
    toastNoLyrics: 'å…ˆã«åŸæ–‡æ­Œè©ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
    toastNoPhonetic: 'å…ˆã«ã‚«ã‚¿ã‚«ãƒŠç™ºéŸ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
    toastRequired: 'æ›²åã¨ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
    confirmDelete: 'ã“ã®æ›²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ',
    aiLoading: 'AIãŒã‚«ã‚¿ã‚«ãƒŠç™ºéŸ³ã‚’ç”Ÿæˆä¸­...',
    aiFailed: 'ç”Ÿæˆå¤±æ•—',
    aiRetry: 'æ‰‹å‹•å…¥åŠ›ã™ã‚‹ã‹å†è©¦è¡Œã—ã¦ãã ã•ã„',
    exportTitle: 'ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
    exportCopy: 'ğŸ“‹ ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ”ãƒ¼',
    exportClose: 'é–‰ã˜ã‚‹',
    karaokeEnd: 'ğŸ¤ ãŠç–²ã‚Œæ§˜ï¼',
    karaokeTapBack: 'ã‚¿ãƒƒãƒ—ã§æˆ»ã‚‹',
    karaokeHint: 'ã‚¿ãƒƒãƒ—ã¾ãŸã¯â†’ã‚­ãƒ¼ã§æ¬¡ã¸',
    notEntered: 'ï¼ˆæœªå…¥åŠ›ï¼‰',
  },
  'zh-TW': {
    title: 'æ„Ÿè¦ºæ­Œè©',
    subtitle: 'ç”¨ä¸­æ–‡æ³¨éŸ³å”±å¤–åœ‹æ­Œæ›²',
    searchPlaceholder: 'æœå°‹æ­Œæ›²æˆ–æ­Œæ‰‹...',
    addSong: 'æ–°å¢æ­Œæ›²',
    backToList: 'â† è¿”å›åˆ—è¡¨',
    aiSection: 'ğŸ¤– AI ä¸­æ–‡è«§éŸ³ç”Ÿæˆ',
    optStretch: 'ğŸµ å»¶é•·éŸ³ç¯€',
    optStress: 'ğŸ’ª é‡éŸ³æ¨™è¨˜',
    optRhyme: 'ğŸ¶ æŠ¼éŸ»æ„Ÿ',
    btnAi: 'âœ¨ AI ç”Ÿæˆ',
    btnKaraoke: 'ğŸ¤ KTVæ¨¡å¼',
    btnAddLine: '+ æ–°å¢è¡Œ',
    btnExport: 'ğŸ“¤ åŒ¯å‡º',
    colOriginal: 'åŸæ–‡æ­Œè©',
    colPhonetic: 'ä¸­æ–‡è«§éŸ³',
    phoneticPlaceholder: 'è¼¸å…¥ä¸­æ–‡è«§éŸ³...',
    addTitle: 'æ­Œæ›²åç¨±',
    addArtist: 'æ­Œæ‰‹',
    addYoutube: 'YouTube é€£çµ',
    addSpotify: 'Spotify é€£çµ',
    addLyrics: 'æ­Œè©ï¼ˆæ¯è¡Œä¸€å¥ï¼‰',
    btnRegister: 'æ–°å¢',
    btnCancel: 'å–æ¶ˆ',
    newSongTitle: 'ğŸµ æ–°å¢æ­Œæ›²',
    toastRegistered: 'æ­Œæ›²å·²æ–°å¢ï¼',
    toastDeleted: 'å·²åˆªé™¤',
    toastCopied: 'å·²è¤‡è£½ï¼',
    toastAiDone: 'âœ¨ ç™¼éŸ³ç”Ÿæˆå®Œæˆï¼',
    toastNoLyrics: 'è«‹å…ˆè¼¸å…¥åŸæ–‡æ­Œè©',
    toastNoPhonetic: 'è«‹å…ˆè¼¸å…¥ä¸­æ–‡è«§éŸ³',
    toastRequired: 'è«‹è¼¸å…¥æ­Œæ›²åç¨±å’Œæ­Œæ‰‹',
    confirmDelete: 'è¦åˆªé™¤é€™é¦–æ­Œå—ï¼Ÿ',
    aiLoading: 'AI æ­£åœ¨ç”Ÿæˆä¸­æ–‡è«§éŸ³...',
    aiFailed: 'ç”Ÿæˆå¤±æ•—',
    aiRetry: 'è«‹æ‰‹å‹•è¼¸å…¥æˆ–é‡è©¦',
    exportTitle: 'ğŸ“¤ åŒ¯å‡º',
    exportCopy: 'ğŸ“‹ è¤‡è£½æ–‡å­—',
    exportClose: 'é—œé–‰',
    karaokeEnd: 'ğŸ¤ å¤ªæ£’äº†ï¼',
    karaokeTapBack: 'é»æ“Šè¿”å›',
    karaokeHint: 'é»æ“Šæˆ–â†’éµä¸‹ä¸€è¡Œ',
    notEntered: 'ï¼ˆæœªè¼¸å…¥ï¼‰',
  },
};

let currentLang = localStorage.getItem('feellyrics_lang') || (navigator.language.startsWith('ja') ? 'ja' : navigator.language.startsWith('zh') ? 'zh-TW' : navigator.language.startsWith('en') ? 'en' : 'ko');
if (!I18N[currentLang]) currentLang = 'ko';

function t(key) { return I18N[currentLang]?.[key] || I18N.ko[key] || key; }

function setLang(lang) {
  currentLang = lang;
  localStorage.setItem('feellyrics_lang', lang);
  document.getElementById('htmlRoot').lang = lang === 'zh-TW' ? 'zh-Hant' : lang;
  render();
}

function renderLangSwitcher() {
  return `<div class="lang-switcher">${LANGS.map(l =>
    `<button class="lang-btn ${l===currentLang?'active':''}" data-lang="${l}">${LANG_LABELS[l]}</button>`
  ).join('')}</div>`;
}

const SAMPLE_SONGS = [
  {
    id: 's1', title: 'Shape of You', artist: 'Ed Sheeran', emoji: 'ğŸŸ§',
    gradient: 'linear-gradient(135deg,#ff6b35,#ff2d78)',
    links: { youtube: 'https://www.youtube.com/watch?v=JGwWNGJdvx8', spotify: 'https://open.spotify.com/track/7qiZfU4dY1lWllzX7mPBI3' },
    lines: [
      { original: "The club isn't the best place to find a lover", korean: 'ë” í´ëŸ½ ì´ì „ ë” ë² ìŠ¤íŠ¸ í”Œë ˆì´ìŠ¤ íˆ¬ íŒŒì¸ë‹¤ ëŸ¬ë²„' },
      { original: "So the bar is where I go", korean: 'ì˜ ë” ë°” ì´ì¦ˆ ì›¨ì–´ ì•„ì´ ê³ ' },
      { original: "Me and my friends at the table doing shots", korean: 'ë¯¸ ì•¤ ë§ˆì´ í”„ë Œì¦ˆ ì•³ ë” í…Œì´ë¸” ë‘ì‰ ìƒ·ì¸ ' },
      { original: "Drinking fast and then we talk slow", korean: 'ë“œë§í‚¹ íŒ¨ìŠ¤íŠ¸ ì•¤ ë´ ìœ„ í†¡ ìŠ¬ë¡œìš°' },
      { original: "I'm in love with the shape of you", korean: 'ì•„ì„ ì¸ ëŸ¬ë¸Œ ìœ‹ ë” ì…°ì ì˜¤ë¸Œ ìœ ' },
      { original: "We push and pull like a magnet do", korean: 'ìœ„ í‘¸ì‰¬ ì•¤ í’€ ë¼ì´ì¹´ ë§ˆê·¸ë„· ë‘' },
      { original: "Although my heart is falling too", korean: 'ì˜¬ë„ ë§ˆì´ í•˜íŠ¸ ì´ì¦ˆ í´ë§ íˆ¬' },
      { original: "I'm in love with your body", korean: 'ì•„ì„ ì¸ ëŸ¬ë¸Œ ìœ‹ ìœ ì–´ ë°”ë””' },
    ]
  },
  {
    id: 's2', title: 'Blinding Lights', artist: 'The Weeknd', emoji: 'ğŸŒƒ',
    gradient: 'linear-gradient(135deg,#e01f4f,#ff6b35)',
    links: { youtube: 'https://www.youtube.com/watch?v=4NRXx6U8ABQ', spotify: 'https://open.spotify.com/track/0VjIjW4GlUZAMYd2vXMi3b' },
    lines: [
      { original: "I've been tryna call", korean: 'ì•„ì´ë¸Œ ë¹ˆ íŠ¸ë¼ì´ë‚˜ ì½œ' },
      { original: "I've been on my own for long enough", korean: 'ì•„ì´ë¸Œ ë¹ˆ ì˜¨ ë§ˆì´ ì˜¤ìš´ í¬ ë¡± ì´ë„ˆí”„' },
      { original: "Maybe you can show me how to love, maybe", korean: 'ë©”ì´ë¹„ ìœ  ìº” ì‡¼ ë¯¸ í•˜ìš° íˆ¬ ëŸ¬ë¸Œ ë©”ì´ë¹„' },
      { original: "I'm going through withdrawals", korean: 'ì•„ì„ ê³ ì‰ ì“°ë£¨ ìœ„ë“œë¡œì–¼ì¦ˆ' },
      { original: "I said ooh, I'm blinding lights", korean: 'ì•„ì´ ì„¸ë“œ ìš°~ ì•„ì„ ë¸”ë¼ì¸ë”© ë¼ì´ì¸ ' },
      { original: "No I can't sleep until I feel your touch", korean: 'ë…¸ ì•„ì´ ìº” ìŠ¬ë¦½ ì–¸í‹¸ ì•„ì´ í•„ ìœ ì–´ í„°ì¹˜' },
    ]
  },
  {
    id: 's3', title: 'Someone Like You', artist: 'Adele', emoji: 'ğŸ’§',
    gradient: 'linear-gradient(135deg,#4a90d9,#1a1a3e)',
    links: { youtube: 'https://www.youtube.com/watch?v=hLQl3WQQoQ0', spotify: 'https://open.spotify.com/track/1zwMYTA5nlNjZxYrvBB2pV' },
    lines: [
      { original: "I heard that you're settled down", korean: 'ì•„ì´ í—ˆë“œ ëŒ“ ìœ ì–´ ì„¸í‹€ë“œ ë‹¤ìš´' },
      { original: "That you found a girl and you're married now", korean: 'ëŒ“ ìœ  íŒŒìš´ë‹¤ ê±¸ ì•¤ ìœ ì–´ ë§¤ë¦¬ë“œ ë‚˜ìš°' },
      { original: "Never mind, I'll find someone like you", korean: 'ë„¤ë²„ë§ˆì¸ë“œ ì•„ì¼ íŒŒì¸ë“œ ì¸ì› ë¼ì´í¬ ìœ ~' },
      { original: "I wish nothing but the best for you, too", korean: 'ì•„ì´ ìœ„ì‰¬ ë‚«ëµ ë²— ë” ë² ìŠ¤íŠ¸ í¬ ìœ  íˆ¬' },
      { original: "Don't forget me, I beg", korean: 'ëˆ í¬ê²Ÿ ë¯¸ ì•„ì´ ë²¡' },
      { original: "I remember you said", korean: 'ì•„ì´ ë¦¬ë©¤ë²„ ìœ  ì„¸ë“œ' },
      { original: "Sometimes it lasts in love but sometimes it hurts instead", korean: 'ì¸íƒ€ì„ì¦ˆ ì‡ ë˜ìŠ¤ì¸  ì¸ ëŸ¬ë¸Œ ë²— ì¸íƒ€ì„ì¦ˆ ì‡ í—ˆì¸  ì¸ìŠ¤í…Œë“œ' },
    ]
  },
  {
    id: 's4', title: 'Bohemian Rhapsody', artist: 'Queen', emoji: 'ğŸ‘‘',
    gradient: 'linear-gradient(135deg,#ffd700,#8b0000)',
    links: { youtube: 'https://www.youtube.com/watch?v=fJ9rUzIMcZQ', spotify: 'https://open.spotify.com/track/7tFiyTwD0nx5a1eklYtX2J' },
    lines: [
      { original: "Is this the real life? Is this just fantasy?", korean: 'ì´ì¦ˆ ë””ìŠ¤ ë” ë¦¬ì–¼ ë¼ì´í”„? ì´ì¦ˆ ë””ìŠ¤ ì €ìŠ¤íŠ¸ íŒíƒ€ì§€?' },
      { original: "Caught in a landslide, no escape from reality", korean: 'ì½§ ì¸ ì–´ ëœë“œìŠ¬ë¼ì´ë“œ ë…¸ ì´ìŠ¤ì¼€ì´í”„ í”„ë¡¬ ë¦¬ì–¼ë¦¬í‹°' },
      { original: "Open your eyes, look up to the skies and see", korean: 'ì˜¤í”ˆ ìœ ì–´ ì•„ì´ì¦ˆ ë£© ì—… íˆ¬ ë” ìŠ¤ì¹´ì´ì¦ˆ ì•¤ ì”¨' },
      { original: "I'm just a poor boy, I need no sympathy", korean: 'ì•„ì„ ì €ìŠ¤íŠ¸ ì–´ í‘¸ì–´ ë³´ì´ ì•„ì´ ë‹ˆë“œ ë…¸ ì‹¬í¼ì‹œ' },
      { original: "Easy come, easy go, little high, little low", korean: 'ì´ì§€ ì»´ ì´ì§€ ê³  ë¦¬í‹€ í•˜ì´ ë¦¬í‹€ ë¡œìš°' },
      { original: "Mama, just killed a man", korean: 'ë§ˆë§ˆ~ ì €ìŠ¤íŠ¸ í‚¬ë“œ ì–´ ë§¨' },
      { original: "Put a gun against his head, pulled my trigger now he's dead", korean: 'í’‹ ì–´ ê±´ ì–´ê²ìŠ¤íŠ¸ íˆì¦ˆ í—¤ë“œ í’€ë“œ ë§ˆì´ íŠ¸ë¦¬ê±° ë‚˜ìš° íˆì¦ˆ ë°ë“œ' },
    ]
  },
  {
    id: 's5', title: 'Yesterday', artist: 'The Beatles', emoji: 'ğŸ¸',
    gradient: 'linear-gradient(135deg,#8b6914,#2d1810)',
    links: { youtube: 'https://www.youtube.com/watch?v=NrgmdOz227I', spotify: 'https://open.spotify.com/track/3BQHpFgAp4l80e1XslIjNI' },
    lines: [
      { original: "Yesterday, all my troubles seemed so far away", korean: 'ì˜ˆìŠ¤í„°ë°ì´ ì˜¬ ë§ˆì´ íŠ¸ëŸ¬ë¸”ìŠ¤ ì‹¬ë“œ ì˜ íŒŒ ì–´ì›¨ì´' },
      { original: "Now it looks as though they're here to stay", korean: 'ë‚˜ìš° ì‡ ë£©ìŠ¤ ì• ì¦ˆ ë„ ë°ì–´ íˆì–´ íˆ¬ ìŠ¤í…Œì´' },
      { original: "Oh, I believe in yesterday", korean: 'ì˜¤~ ì•„ì´ ë¹Œë¦¬ë¸Œ ì¸ ì˜ˆìŠ¤í„°ë°ì´' },
      { original: "Suddenly, I'm not half the man I used to be", korean: 'ì„œë“ ë¦¬ ì•„ì„ ë‚« í•´í”„ ë” ë§¨ ì•„ì´ ìœ ì¦ˆë“œ íˆ¬ ë¹„' },
      { original: "There's a shadow hanging over me", korean: 'ë°ì–´ì¦ˆ ì–´ ì„€ë„ìš° í–‰ì‰ ì˜¤ë²„ ë¯¸' },
      { original: "Oh, yesterday came suddenly", korean: 'ì˜¤~ ì˜ˆìŠ¤í„°ë°ì´ ì¼€ì„ ì„œë“ ë¦¬' },
    ]
  },
  {
    id: 's6', title: 'Hotel California', artist: 'Eagles', emoji: 'ğŸ¨',
    gradient: 'linear-gradient(135deg,#ff8c42,#1a0a2e)',
    links: { youtube: 'https://www.youtube.com/watch?v=09839DpTctU', spotify: 'https://open.spotify.com/track/40riOy7x9W7GXjyGp4pjAv' },
    lines: [
      { original: "On a dark desert highway, cool wind in my hair", korean: 'ì˜¨ ì–´ ë‹¤í¬ ë°ì €íŠ¸ í•˜ì´ì›¨ì´ ì¿¨ ìœˆë“œ ì¸ ë§ˆì´ í—¤ì–´' },
      { original: "Warm smell of colitas rising up through the air", korean: 'ì›œ ìŠ¤ë©œ ì˜¤ë¸Œ ì½œë¦¬íƒ€ìŠ¤ ë¼ì´ì§• ì—… ì“°ë£¨ ë”” ì—ì–´' },
      { original: "Welcome to the Hotel California", korean: 'ì›°ì»´ íˆ¬ ë” í˜¸í…” ìº˜ë¦¬í¬ë‹ˆì•„~' },
      { original: "Such a lovely place, such a lovely face", korean: 'ì„œì¹˜ ì–´ ëŸ¬ë¸”ë¦¬ í”Œë ˆì´ìŠ¤ ì„œì¹˜ ì–´ ëŸ¬ë¸”ë¦¬ í˜ì´ìŠ¤' },
      { original: "You can check out any time you like", korean: 'ìœ  ìº” ì²´í¬ ì•„ì›ƒ ì• ë‹ˆ íƒ€ì„ ìœ  ë¼ì´í¬' },
      { original: "But you can never leave", korean: 'ë²— ìœ  ìº” ë„¤ë²„ ë¦¬ë¸Œ~' },
    ]
  },
  {
    id: 's7', title: "Don't Stop Believin'", artist: 'Journey', emoji: 'ğŸš‚',
    gradient: 'linear-gradient(135deg,#4169e1,#ff6347)',
    links: { youtube: 'https://www.youtube.com/watch?v=1k8craCGpgs', spotify: 'https://open.spotify.com/track/4bHsxqR3GMrXTxEPLuK5ue' },
    lines: [
      { original: "Just a small town girl, livin' in a lonely world", korean: 'ì €ìŠ¤íŠ¸ ì–´ ìŠ¤ëª° íƒ€ìš´ ê±¸ ë¦¬ë¹ˆ ì¸ ì–´ ë¡ ë¦¬ ì›”ë“œ' },
      { original: "She took the midnight train goin' anywhere", korean: 'ì‰¬ íˆ­ ë” ë¯¸ë“œë‚˜ì‡ íŠ¸ë ˆì¸ ê³ ì‰ ì• ë‹ˆì›¨ì–´' },
      { original: "Just a city boy, born and raised in South Detroit", korean: 'ì €ìŠ¤íŠ¸ ì–´ ì‹œí‹° ë³´ì´ ë³¸ ì•¤ ë ˆì´ì¦ˆë“œ ì¸ ì‚¬ìš°ìŠ¤ ë””íŠ¸ë¡œì‡' },
      { original: "Strangers waiting up and down the boulevard", korean: 'ìŠ¤íŠ¸ë ˆì¸ì €ìŠ¤ ì›¨ì´íŒ… ì—… ì•¤ ë‹¤ìš´ ë” ë¶ˆëŸ¬ë°”ë“œ' },
      { original: "Don't stop believin', hold on to that feelin'", korean: 'ëˆ ìŠ¤íƒ‘ ë¹Œë¦¬ë¹ˆ~ í™€ë“œ ì˜¨ íˆ¬ ëŒ“ í•„ë§~' },
    ]
  },
  {
    id: 's8', title: 'Rolling in the Deep', artist: 'Adele', emoji: 'ğŸ”¥',
    gradient: 'linear-gradient(135deg,#c0392b,#2c3e50)',
    links: { youtube: 'https://www.youtube.com/watch?v=rYEDA3JcQqw', spotify: 'https://open.spotify.com/track/1c8gk2PeTE04A1pIDH9YMk' },
    lines: [
      { original: "There's a fire starting in my heart", korean: 'ë°ì–´ì¦ˆ ì–´ íŒŒì´ì–´ ìŠ¤íƒ€íŒ… ì¸ ë§ˆì´ í•˜íŠ¸' },
      { original: "Reaching a fever pitch and it's bringing me out the dark", korean: 'ë¦¬ì¹­ ì–´ í”¼ë²„ í”¼ì¹˜ ì•¤ ì‡ì¸  ë¸Œë§ì‰ ë¯¸ ì•„ì›ƒ ë” ë‹¤í¬' },
      { original: "We could have had it all", korean: 'ìœ„ ì¿ ë“œ í•´ë¸Œ í•´ë“œ ì‡ ì˜¬~' },
      { original: "Rolling in the deep", korean: 'ë¡¤ë§ ì¸ ë” ë”¥~' },
      { original: "You had my heart inside of your hands", korean: 'ìœ  í•´ë“œ ë§ˆì´ í•˜íŠ¸ ì¸ì‚¬ì´ë“œ ì˜¤ë¸Œ ìœ ì–´ í•¸ì¦ˆ' },
      { original: "And you played it to the beat", korean: 'ì•¤ ìœ  í”Œë ˆì´ë“œ ì‡ íˆ¬ ë” ë¹—' },
    ]
  },
  {
    id: 's9', title: 'Uptown Funk', artist: 'Bruno Mars', emoji: 'ğŸ•º',
    gradient: 'linear-gradient(135deg,#ff1744,#ffc107)',
    links: { youtube: 'https://www.youtube.com/watch?v=OPf0YbXqDm0', spotify: 'https://open.spotify.com/track/32OlwWuMpZ6b0aN2RZOeMS' },
    lines: [
      { original: "This hit, that ice cold, Michelle Pfeiffer, that white gold", korean: 'ë””ìŠ¤ í› ëŒ“ ì•„ì´ìŠ¤ ì½œë“œ ë¯¸ì…¸ íŒŒì´í¼ ëŒ“ í™”ì´íŠ¸ ê³¨ë“œ' },
      { original: "Don't believe me, just watch", korean: 'ëˆ ë¹Œë¦¬ë¸Œ ë¯¸ ì €ìŠ¤íŠ¸ ì›Œì¹˜!' },
      { original: "Uptown funk you up, uptown funk you up", korean: 'ì—…íƒ€ìš´ í‘í¬ ìœ  ì—…! ì—…íƒ€ìš´ í‘í¬ ìœ  ì—…!' },
      { original: "Saturday night and we in the spot", korean: 'ìƒˆí„°ë°ì´ ë‚˜ì‡ ì•¤ ìœ„ ì¸ ë” ìŠ¤íŒŸ' },
      { original: "Girls hit your hallelujah", korean: 'ê±¸ìŠ¤ í› ìœ ì–´ í• ë ë£¨ì•¼~' },
      { original: "Cause uptown funk gon' give it to you", korean: 'ì»¤ì¦ˆ ì—…íƒ€ìš´ í‘í¬ ê³¤ ê¸°ë¹— íˆ¬ ìœ ' },
    ]
  },
  {
    id: 's10', title: 'Dynamite', artist: 'BTS', emoji: 'ğŸ§¨',
    gradient: 'linear-gradient(135deg,#7b1fa2,#ff6f00)',
    links: { youtube: 'https://www.youtube.com/watch?v=gdZLi9oWNZg', spotify: 'https://open.spotify.com/track/5QDLhrAOJJdNAmCTJ8xMyW' },
    lines: [
      { original: "Cause I, I, I'm in the stars tonight", korean: 'ì»¤ì¦ˆ ì•„ì´ ì•„ì´ ì•„ì´ ì•„ì„ ì¸ ë” ìŠ¤íƒ€ì¦ˆ íˆ¬ë‚˜ì‡' },
      { original: "So watch me bring the fire and set the night alight", korean: 'ì˜ ì›Œì¹˜ ë¯¸ ë¸Œë§ ë” íŒŒì´ì–´ ì•¤ ì…‹ ë” ë‚˜ì‡ ì–¼ë¼ì‡' },
      { original: "Shining through the city with a little funk and soul", korean: 'ìƒ¤ì´ë‹ ì“°ë£¨ ë” ì‹œí‹° ìœ‹ ì–´ ë¦¬í‹€ í‘í¬ ì•¤ ì†Œìš¸' },
      { original: "So I'ma light it up like dynamite", korean: 'ì˜ ì•„ì´ë§ˆ ë¼ì‡ ì‡ ì—… ë¼ì´í¬ ë‹¤ì´ë„ˆë§ˆì´íŠ¸!' },
      { original: "Dy-na-na-na-na-na-na-na-na-na, life is dynamite", korean: 'ë‹¤ì´ ë‚˜ë‚˜ë‚˜ë‚˜ë‚˜ë‚˜ ë‚˜ë‚˜ë‚˜ ë¼ì´í”„ ì´ì¦ˆ ë‹¤ì´ë„ˆë§ˆì´íŠ¸!' },
      { original: "Bring a friend, join the crowd, whoever wanna come along", korean: 'ë¸Œë§ ì–´ í”„ë Œë“œ ì¡°ì¸ ë” í¬ë¼ìš°ë“œ í›„ì—ë²„ ì›Œë‚˜ ì»´ ì–¼ë¡±' },
    ]
  },
  {
    id: 's11', title: 'Despacito', artist: 'Luis Fonsi ft. Daddy Yankee', emoji: 'ğŸŒ´',
    gradient: 'linear-gradient(135deg,#ff6b35,#ffce00)',
    links: { youtube: 'https://www.youtube.com/watch?v=kJQP7kiw5Fk', spotify: 'https://open.spotify.com/track/6habFhsOp2NvshLv26DqMb' },
    lines: [
      { original: 'Despacito, quiero respirar tu cuello despacito', korean: 'ë°ìŠ¤íŒŒì‹œë˜~ ë¼ì—ë¡œ ë ˆìŠ¤í”¼ë¼ë¥´ ëšœ ê¾¸ì—ìš” ë°ìŠ¤íŒŒì‹œë˜' },
      { original: 'Deja que te diga cosas al oÃ­do', korean: 'ë°í•˜ ê²Œ ë–¼ ë””ê°€ ê¼¬ì‚¬ìŠ¤ ì•Œ ì˜¤ì´ë„' },
      { original: 'Para que te acuerdes si no estÃ¡s conmigo', korean: 'ë¹ ë¼ ê²Œ ë–¼ ì•„ê¾¸ì—ë¥´ë°ìŠ¤ ì‹œ ë…¸ ì—ìŠ¤ë”°ìŠ¤ ê¼°ë¯¸ê³ ' },
      { original: 'Despacito, quiero desnudarte a besos despacito', korean: 'ë°ìŠ¤íŒŒì‹œë˜~ ë¼ì—ë¡œ ë°ìŠ¤ëˆ„ë‹¤ë¥´ë–¼ ì•„ ë² ì†ŒìŠ¤ ë°ìŠ¤íŒŒì‹œë˜' },
      { original: 'Firmo en las paredes de tu laberinto', korean: 'í”¼ë¥´ëª¨ ì—” ë¼ìŠ¤ ë¹ ë ˆë°ìŠ¤ ë° ëšœ ë¼ë² ë¦°ë˜' },
      { original: 'Y hacer de tu cuerpo todo un manuscrito', korean: 'ì´ ì•„ì„¸ë¥´ ë° ëšœ ê¾¸ì—ë¥´ë½€ ë˜ë„ ìš´ ë§ˆëˆ„ìŠ¤ë„ë¦¬ë˜' },
      { original: 'Sube, sube, sube, sube, sube', korean: 'ìˆ˜ë²  ìˆ˜ë²  ìˆ˜ë²  ìˆ˜ë²  ìˆ˜ë² ~' },
      { original: 'Pasito a pasito, suave suavecito', korean: 'ë¹ ì‹œë˜ ì•„ ë¹ ì‹œë˜~ ìˆ˜ì•„ë²  ìˆ˜ì•„ë² ì‹œë˜~' },
      { original: "Nos vamos pegando poquito a poquito", korean: 'ë…¸ìŠ¤ ë°”ëª¨ìŠ¤ ë»¬ê°„ë„ ë½€ë¼ë˜ ì•„ ë½€ë¼ë˜' },
    ]
  },
  {
    id: 's12', title: 'First Love (åˆæ‹)', artist: 'å®‡å¤šç”°ãƒ’ã‚«ãƒ« (Utada Hikaru)', emoji: 'ğŸŒ¸',
    gradient: 'linear-gradient(135deg,#f8b4c8,#6a0dad)',
    links: { youtube: 'https://www.youtube.com/watch?v=o1sUaVJUeB0', spotify: 'https://open.spotify.com/track/7nYOFJyqFYMJ0xjBfEaJNz' },
    lines: [
      { original: 'æœ€å¾Œã®ã‚­ã‚¹ã¯ã‚¿ãƒã‚³ã® flavor ãŒã—ãŸ', korean: 'ì‚¬ì´ê³ ë…¸ í‚¤ìŠ¤ì™€ íƒ€ë°”ì½”ë…¸ í›„ë ˆì´ë°”ê°€ ì‹œíƒ€' },
      { original: 'ãƒ‹ã‚¬ãã¦åˆ‡ãªã„é¦™ã‚Š', korean: 'ë‹ˆê°€ì¿ í…Œ ì„¸ì¸ ë‚˜ì´ ì¹´ì˜¤ë¦¬' },
      { original: 'æ˜æ—¥ã®ä»Šé ƒã«ã¯', korean: 'ì•„ì‹œíƒ€ë…¸ ì´ë§ˆê³ ë¡œë‹ˆì™€' },
      { original: 'ã‚ãªãŸã¯ã©ã“ã«ã„ã‚‹ã‚“ã ã‚ã†', korean: 'ì•„ë‚˜íƒ€ì™€ ë„ì½”ë‹ˆ ì´ë£¬ë‹¤ë¡œ~' },
      { original: 'èª°ã‚’æƒ³ã£ã¦ã‚‹ã‚“ã ã‚ã†', korean: 'ë‹¤ë ˆì˜¤ ì˜¤ëª»í…Œë£¬ë‹¤ë¡œ~' },
      { original: 'You are always gonna be my love', korean: 'ìœ  ì•„ ì˜¬ì›¨ì´ì¦ˆ ê³ ë‚˜ ë¹„ ë§ˆì´ ëŸ¬ë¸Œ' },
      { original: 'ã„ã¤ã‹èª°ã‹ã¨ã¾ãŸæ‹ã«è½ã¡ã¦ã‚‚', korean: 'ì´ì¸ ì¹´ ë‹¤ë ˆì¹´í†  ë§ˆíƒ€ ì½”ì´ë‹ˆ ì˜¤ì¹˜í…Œëª¨' },
      { original: "I'll remember to love, you taught me how", korean: 'ì•„ì¼ ë¦¬ë©¤ë²„ íˆ¬ ëŸ¬ë¸Œ ìœ  í†³ ë¯¸ í•˜ìš°' },
      { original: 'You are always gonna be the one', korean: 'ìœ  ì•„ ì˜¬ì›¨ì´ì¦ˆ ê³ ë‚˜ ë¹„ ë” ì›' },
      { original: 'ä»Šã¯ã¾ã æ‚²ã—ã„ love song', korean: 'ì´ë§ˆì™€ ë§ˆë‹¤ ì¹´ë‚˜ì‹œì´ ëŸ¬ë¸Œ ì­~' },
      { original: 'æ–°ã—ã„æ­Œ æ­Œãˆã‚‹ã¾ã§', korean: 'ì•„íƒ€ë¼ì‹œì´ ìš°íƒ€ ìš°íƒ€ì—ë£¨ ë§ˆë°' },
    ]
  },
  {
    id: 's13', title: 'å¥¹è¯´ (TÄ ShuÅ)', artist: 'JJ Lin (æ—ä¿Šæ°)', emoji: 'ğŸ®',
    gradient: 'linear-gradient(135deg,#c0392b,#f1c40f)',
    links: { youtube: 'https://www.youtube.com/watch?v=vUv8coct8Yk', spotify: 'https://open.spotify.com/track/632VyMrvhsHIsO4zq9khts' },
    lines: [
      { original: 'ç­‰ä¸åˆ°å¤©é»‘ çƒŸç«ä¸ä¼šå¤ªå®Œç¾', korean: 'ë©ë¶€ë”°ì˜¤ í‹°ì—”í—¤ì´ ì˜Œí›  ë¶€í›„ì´ íƒ€ì´ ì™„ë©”ì´' },
      { original: 'å›å¿†çƒ§æˆç° è¿˜æ˜¯ç­‰ä¸åˆ°ç»“å°¾', korean: 'í›„ì´ì´ ìƒ¤ì˜¤ì²­í›„ì´ í•˜ì´ìŠ¤ ë©ë¶€ë”°ì˜¤ ì§€ì—ì›¨ì´' },
      { original: 'å¥¹æ›¾è¯´çš„æ— æ‰€è°“', korean: 'íƒ€ ì©¡ìŠˆì˜¤ë” ìš°ì’€ì›¨ì´' },
      { original: 'æˆ‘æ€•ä¸€å¤©ä¸€å¤©è¢«æ‘§æ¯', korean: 'ì›Œ íŒŒ ì´í‹°ì—” ì´í‹°ì—” ë² ì´ ì¶”ì´í›„ì´' },
      { original: 'ç­‰ä¸åˆ°å¤©é»‘ ä¸æ•¢å‡‹è°¢çš„èŠ±è•¾', korean: 'ë©ë¶€ë”°ì˜¤ í‹°ì—”í—¤ì´ ë¶€ê°„ ë””ì•„ì˜¤ì‹œì—ë” í™”ë ˆì´' },
      { original: 'ç»¿å¶åœ¨è·Ÿéš æ”¾å¼€åˆºç—›çš„æ»‹å‘³', korean: 'ë¤¼ì˜ˆ ì§œì´ ê²ì’€ì´ íŒ¡ì¹´ì´ ì¸ í†µë” ì¯”ì›¨ì´' },
      { original: 'ä»Šåä¸å†æ€•å¤©æ˜', korean: 'ì§„í˜¸ìš° ë¶€ì§œì´ íŒŒ í‹°ì—”ë°' },
      { original: 'æˆ‘æƒ³åªæ˜¯å®³æ€•æ¸…é†’', korean: 'ì›Œ ì‹œì•™ ì¦ˆìŠ¤ í•˜ì´íŒŒ ì¹­ì‹±' },
    ]
  },
  {
    id: 's14', title: 'ì¢‹ì€ ë‚  (Good Day)', artist: 'IU (ì•„ì´ìœ )', emoji: 'â˜€ï¸',
    gradient: 'linear-gradient(135deg,#ff9a9e,#fad0c4)',
    links: { youtube: 'https://www.youtube.com/watch?v=jeqdYqsrsA0', spotify: 'https://open.spotify.com/track/4TXytrRMEqMgIeMm7aBD3E' },
    lines: [
      { original: 'ì¢‹ì€ ë‚  ì¢‹ì€ ë‚  ì¢‹ì€ ë‚ ', korean: 'jo-eun nal jo-eun nal jo-eun nal' },
      { original: 'ì–´ì©œ ì´ë ‡ê²Œ í•˜ëŠ˜ì€ ë§‘ì€ ê±´ì§€', korean: 'eo-jjeom i-reo-ke ha-neu-reun mal-geun geon-ji' },
      { original: 'ê·¸ëƒ¥ ëª¨ë“  ê²Œ ì¢‹ì€ ë‚ ', korean: 'geu-nyang mo-deun ge jo-eun nal' },
      { original: 'ì´ëŸ° ë‚ ì—” ê·¸ëŸ° ê±°ì•¼', korean: 'i-reon na-ren geu-reon geo-ya' },
      { original: 'ì•„ë¬´ ì´ìœ  ì—†ì´ ê¸°ë¶„ì´ ì¢‹ì€ ë‚ ', korean: 'a-mu i-yu eop-si gi-bu-ni jo-eun nal' },
      { original: 'ë‚˜ëŠ” ì˜¤ëŠ˜ë”°ë¼ ë­”ê°€ ì¢‹ì€ ì¼ì´ ìƒê¸¸ ê²ƒ ê°™ì€', korean: 'na-neun o-neul-tta-ra mwon-ga jo-eun i-ri saeng-gil geot ga-teun' },
    ]
  },
  {
    id: 's15', title: 'ë´„ë‚  (Spring Day)', artist: 'BTS (ë°©íƒ„ì†Œë…„ë‹¨)', emoji: 'ğŸŒ·',
    gradient: 'linear-gradient(135deg,#a8edea,#fed6e3)',
    links: { youtube: 'https://www.youtube.com/watch?v=xEeFrLSkMm8', spotify: 'https://open.spotify.com/track/0LsBaAdFzjSGKRime0wAAo' },
    lines: [
      { original: 'ë³´ê³  ì‹¶ë‹¤ ì´ë ‡ê²Œ ë§í•˜ë‹ˆê¹Œ ë” ë³´ê³  ì‹¶ë‹¤', korean: 'bo-go sip-da i-reo-ke mal-ha-ni-kka deo bo-go sip-da' },
      { original: 'ë„ˆí¬ ì§‘ ì• ê³¨ëª©ê¸¸ì— ì ‘ì–´ë“¤ë©´', korean: 'neo-hui jip ap gol-mok-gi-re jeo-beo-deul-myeon' },
      { original: 'í—ˆì „í•œ ë„¤ ë°©ì— ë‹ˆ ëƒ„ìƒˆê°€ ì‚´ì•„', korean: 'heo-jeon-han ne bang-e ni naem-sae-ga sa-ra' },
      { original: 'ëˆˆê½ƒì´ ë–¨ì–´ì ¸ìš” ë˜ ì¡°ê¸ˆì”© ë©€ì–´ì ¸ìš”', korean: 'nun-kko-chi tteo-reo-jyeo-yo tto jo-geum-ssik meo-reo-jyeo-yo' },
      { original: 'ë³´ê³  ì‹¶ë‹¤ ë³´ê³  ì‹¶ë‹¤', korean: 'bo-go sip-da bo-go sip-da' },
      { original: 'ì–¼ë§ˆë‚˜ ê¸°ë‹¤ë ¤ì•¼ ë˜ ëª‡ ë°¤ì„ ë” ìƒˆì›Œì•¼', korean: 'eol-ma-na gi-da-ryeo-ya tto myeot ba-meul deo sae-wo-ya' },
    ]
  },
  {
    id: 's16', title: 'í•˜ë£¨í•˜ë£¨ (Day by Day)', artist: 'BIGBANG', emoji: 'ğŸ’”',
    gradient: 'linear-gradient(135deg,#434343,#000000)',
    links: { youtube: 'https://www.youtube.com/watch?v=MzCbEdtNbJ0', spotify: 'https://open.spotify.com/track/3LPFnUoVjJMRGbKFxnBq5C' },
    lines: [
      { original: 'í•˜ë£¨í•˜ë£¨ ë¬´ë„ˆì ¸ê°€ ë‚´ ëª¨ìŠµì´ ì‹«ì–´', korean: 'ha-ru-ha-ru mu-neo-jyeo-ga nae mo-seu-bi si-reo' },
      { original: 'ì´ë³„ì´ë€ ë§ ì•ì— ë¬´ë„ˆì ¸ ë‚´ë ¤', korean: 'i-byeo-ri-ran mal a-pe mu-neo-jyeo nae-ryeo' },
      { original: 'ëˆˆë¬¼ì¡°ì°¨ ë§ˆë¥¸ ë‚˜ë¥¼ ë³´ê³ ', korean: 'nun-mul-jo-cha ma-reun na-reul bo-go' },
      { original: 'ê¸°ì–µí•´ì¤˜ ë‚˜ì˜ ë§ˆì§€ë§‰ ëª¨ìŠµì„', korean: 'gi-eok-hae-jweo na-ui ma-ji-mak mo-seu-beul' },
      { original: 'ì‚¬ë‘í–ˆì–´ ë„ˆë¥¼ ì‚¬ë‘í–ˆì–´', korean: 'sa-rang-haess-eo neo-reul sa-rang-haess-eo' },
    ]
  },
  {
    id: 's17', title: 'Gee', artist: "Girls' Generation (ì†Œë…€ì‹œëŒ€)", emoji: 'ğŸ’—',
    gradient: 'linear-gradient(135deg,#ff758c,#ff7eb3)',
    links: { youtube: 'https://www.youtube.com/watch?v=U7mPqycQ0tQ', spotify: 'https://open.spotify.com/track/3EZT0VaW7FLR1cNwBD2cXY' },
    lines: [
      { original: 'Gee gee gee gee baby baby baby', korean: 'ji ji ji ji bei-bi bei-bi bei-bi' },
      { original: 'ì–´ì©œ ì¢‹ì•„ ë„ˆë¬´ë‚˜ ì¢‹ì•„', korean: 'eo-jjeom jo-a neo-mu-na jo-a' },
      { original: 'ëˆˆì´ ë¶€ì…” ë¶€ì…” ë¶€ì…”', korean: 'nu-ni bu-syeo bu-syeo bu-syeo' },
      { original: 'ë„ˆë¬´ ë°˜ì§ë°˜ì§ ëˆˆì´ ë¶€ì…”', korean: 'neo-mu ban-jjak-ban-jjak nu-ni bu-syeo' },
      { original: 'ìˆ¨ë„ ëª» ì‰¬ê² ì–´ ë–¨ë¦¬ëŠ” ë–¨ë¦¬ëŠ”', korean: 'sum-do mot swi-gess-eo tteol-ri-neun tteol-ri-neun' },
      { original: 'ì•„ì§ë„ ë¯¿ê¸°ì§€ê°€ ì•Šì•„', korean: 'a-jik-do mit-gi-ji-ga an-a' },
    ]
  },
  {
    id: 's18', title: 'ê°•ë‚¨ìŠ¤íƒ€ì¼ (Gangnam Style)', artist: 'PSY (ì‹¸ì´)', emoji: 'ğŸ•¶ï¸',
    gradient: 'linear-gradient(135deg,#f7971e,#ffd200)',
    links: { youtube: 'https://www.youtube.com/watch?v=9bZkp7q19f0', spotify: 'https://open.spotify.com/track/03UrZgBINjbmMagKeENGnf' },
    lines: [
      { original: 'ì˜¤ë¹¤ ê°•ë‚¨ìŠ¤íƒ€ì¼', korean: 'op-pan gang-nam-seu-ta-il' },
      { original: 'ë‚®ì—ëŠ” ë”°ì‚¬ë¡œìš´ ì¸ê°„ì ì¸ ì—¬ì', korean: 'na-je-neun tta-sa-ro-un in-gan-jeo-gin yeo-ja' },
      { original: 'ì»¤í”¼ í•œì”ì˜ ì—¬ìœ ë¥¼ ì•„ëŠ” í’ˆê²© ìˆëŠ” ì—¬ì', korean: 'keo-pi han-ja-nui yeo-yu-reul a-neun pum-gyeok in-neun yeo-ja' },
      { original: 'ì•„ë¦„ë‹¤ì›Œ ì‚¬ë‘ìŠ¤ëŸ¬ì›Œ', korean: 'a-reum-da-wo sa-rang-seu-reo-wo' },
      { original: 'ê·¸ë˜ ë„ˆ hey ê·¸ë˜ ë°”ë¡œ ë„ˆ hey', korean: 'geu-rae neo hey geu-rae ba-ro neo hey' },
      { original: 'ì˜¤ë¹¤ ê°•ë‚¨ìŠ¤íƒ€ì¼ ì— ì„¹ì‹œë ˆì´ë””', korean: 'op-pan gang-nam-seu-ta-il e sek-si-re-i-di' },
    ]
  },
  {
    id: 's19', title: 'Blueming', artist: 'IU (ì•„ì´ìœ )', emoji: 'ğŸ’™',
    gradient: 'linear-gradient(135deg,#667eea,#764ba2)',
    links: { youtube: 'https://www.youtube.com/watch?v=D1PvIWdJ8xo', spotify: 'https://open.spotify.com/track/4Dr2hJ1lkGMi0oEFf5xyKo' },
    lines: [
      { original: 'ì˜¤ëŠ˜ ë°¤ ë„ˆì—ê²Œ ê°€ë„ ë ê¹Œ', korean: 'o-neul bam neo-e-ge ga-do dwel-kka' },
      { original: 'ìš°ë¦¬ ì‚¬ì´ ê±°ë¦¬ë¥¼ ì•Œë©´ì„œë„', korean: 'u-ri sa-i geo-ri-reul al-myeon-seo-do' },
      { original: 'ë‚´ ë§˜ì€ blueming', korean: 'nae ma-meun blueming~' },
      { original: 'í˜¼ì í”¼ëŠ” ê½ƒì€ ì—†ë“¯ì´', korean: 'hon-ja pi-neun kko-cheun eop-deu-si' },
      { original: 'I bloom just for you', korean: 'I bloom just for you~' },
    ]
  },
  {
    id: 's20', title: 'ëšœë‘ëšœë‘ (DDU-DU DDU-DU)', artist: 'BLACKPINK', emoji: 'ğŸ–¤',
    gradient: 'linear-gradient(135deg,#ff0084,#33001b)',
    links: { youtube: 'https://www.youtube.com/watch?v=IHNzOHi8sJs', spotify: 'https://open.spotify.com/track/4fSIb4S200FBHBuCNMnFE8' },
    lines: [
      { original: 'ëšœë‘ëšœë‘ ëšœë‘ëšœë‘', korean: 'ttu-du-ttu-du ttu-du-ttu-du' },
      { original: 'ì´ì œ ë‹¬ë ¤ì•¼ í•´ ì–´ë”œ ê°€ë“ ', korean: 'i-je dal-ryeo-ya hae eo-dil ga-deun' },
      { original: 'ë„Œ ë‚  ê°ë‹¹ ëª»í•´', korean: 'neon nal gam-dang mot-hae' },
      { original: 'ë‚´ê°€ ì˜ˆë» ì˜ˆë» ì˜ˆë»ì„œ', korean: 'nae-ga ye-ppeo ye-ppeo ye-ppeo-seo' },
      { original: 'ë†€ë€ ê±°ì§€ ê±°ì§€ ê±°ì§€', korean: 'nol-lan geo-ji geo-ji geo-ji' },
      { original: 'ë‚  ë°Ÿê³  ì˜¬ë¼ê°€', korean: 'nal balp-go ol-la-ga' },
    ]
  },
  {
    id: 's21', title: 'ìœ¼ë¥´ë  (Growl)', artist: 'EXO', emoji: 'ğŸº',
    gradient: 'linear-gradient(135deg,#2c3e50,#e74c3c)',
    links: { youtube: 'https://www.youtube.com/watch?v=I3dezFzsNss', spotify: 'https://open.spotify.com/track/3EoMBwE3pqFPBFDNULJwEf' },
    lines: [
      { original: 'ë‚˜ì˜ ì‚¬ëƒ¥ê°ì´ ë˜ì–´', korean: 'na-ui sa-nyang-ga-mi doe-eo' },
      { original: 'ë„¤ê°€ ì¢‹ë‹¤ê³  ìœ¼ë¥´ë  ìœ¼ë¥´ë  ìœ¼ë¥´ë  ëŒ€', korean: 'ne-ga jo-ta-go eu-reu-reong eu-reu-reong eu-reu-reong dae' },
      { original: 'ë„¤ê°€ ì˜ˆì˜ë‹¤ê³  ìœ¼ë¥´ë  ìœ¼ë¥´ë  ìœ¼ë¥´ë  ëŒ€', korean: 'ne-ga ye-ppeu-da-go eu-reu-reong eu-reu-reong eu-reu-reong dae' },
      { original: 'ìê¾¸ë§Œ ëˆˆì´ ê°€ ë„¤ê°€ ì‹«ì€ë°', korean: 'ja-kku-man nu-ni ga ne-ga si-reun-de' },
      { original: 'ì´ê±´ ë¶„ëª… ìœ„í—˜í•´', korean: 'i-geon bun-myeong wi-heom-hae' },
    ]
  },
  {
    id: 's22', title: 'ì„œë¥¸ ì¦ˆìŒì— (Around Thirty)', artist: 'ê¹€ê´‘ì„ (Kim Kwang-seok)', emoji: 'ğŸ‚',
    gradient: 'linear-gradient(135deg,#8b6914,#3e2723)',
    links: { youtube: 'https://www.youtube.com/watch?v=B0_-SquSqis', spotify: 'https://open.spotify.com/track/6yEi2VUlLH2BlXPaR5FZUQ' },
    lines: [
      { original: 'ì„œë¥¸ ì¦ˆìŒì— ë‚˜ëŠ” ì™œ ì´ë ‡ê²Œ', korean: 'seo-reun jeu-eum-e na-neun wae i-reo-ke' },
      { original: 'ì‘ì€ ì¼ì—ë„ ë¶„ê°œí•˜ê³ ', korean: 'ja-geun i-re-do bun-gae-ha-go' },
      { original: 'ë³„ê²ƒ ì•„ë‹Œ ì¼ì— í™”ë¥¼ ë‚´ëŠ”ê°€', korean: 'byeol-geot a-nin i-re hwa-reul nae-neun-ga' },
      { original: 'ë‘ë ¤ìš´ ë§ˆìŒìœ¼ë¡œ ê²¨ìš¸ì„ ë³´ë‚´ê³ ', korean: 'du-ryeo-un ma-eu-meu-ro gyeo-u-reul bo-nae-go' },
      { original: 'ë˜ í—ˆì „í•œ ë´„ì„ ë§ì´í•˜ë„¤', korean: 'tto heo-jeon-han bo-meul ma-ji-ha-ne' },
    ]
  },
  {
    id: 's23', title: '200%', artist: 'AKMU (ì•…ë™ë®¤ì§€ì…˜)', emoji: 'ğŸˆ',
    gradient: 'linear-gradient(135deg,#43e97b,#38f9d7)',
    links: { youtube: 'https://www.youtube.com/watch?v=0Oi8jDMvd_o', spotify: 'https://open.spotify.com/track/4fSIb4S200FBHBuCNMnFE8' },
    lines: [
      { original: 'ì§€ê¸ˆ ì´ ìˆœê°„ ë§¤ ì´ˆê°€ ì•„ê¹Œì›Œ', korean: 'ji-geum i sun-gan mae cho-ga ak-ka-wo' },
      { original: 'ì‹œê°„ì´ ë„ˆë¬´ ë¹¨ë¦¬ ê°€', korean: 'si-ga-ni neo-mu ppal-li ga' },
      { original: 'ë„¤ê°€ ë„ˆë¬´ ì¢‹ì•„ 200%', korean: 'ne-ga neo-mu jo-a 200%' },
      { original: 'í•˜ë£¨ê°€ ë‹¤ ê°€ê¸° ì „ì—', korean: 'ha-ru-ga da ga-gi jeon-e' },
      { original: 'ë„ˆì—ê²Œ ë‹¬ë ¤ê°ˆ ê±°ì•¼', korean: 'neo-e-ge dal-ryeo-gal geo-ya' },
    ]
  },
];

// --- State ---
let state = {
  view: 'home', // home | editor | add
  songs: [],
  currentSongId: null,
  search: '',
  karaokeIndex: 0,
  aiOptions: { stretch: false, stress: false, rhyme: false },
};

function loadState() {
  const saved = localStorage.getItem('feellyrics_songs');
  if (saved) {
    state.songs = JSON.parse(saved);
  } else {
    state.songs = JSON.parse(JSON.stringify(SAMPLE_SONGS));
    saveState();
  }
}

function saveState() {
  localStorage.setItem('feellyrics_songs', JSON.stringify(state.songs));
}

function getCurrentSong() {
  return state.songs.find(s => s.id === state.currentSongId);
}

// --- Toast ---
function toast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  setTimeout(() => el.classList.remove('show'), 2000);
}

// --- Render ---
function render() {
  const app = document.getElementById('app');
  switch(state.view) {
    case 'home': app.innerHTML = renderHome(); break;
    case 'editor': app.innerHTML = renderEditor(); break;
    case 'add': app.innerHTML = renderAddForm(); break;
  }
  bindEvents();
}

function renderHome() {
  const filtered = state.songs.filter(s =>
    !state.search || s.title.toLowerCase().includes(state.search.toLowerCase()) ||
    s.artist.toLowerCase().includes(state.search.toLowerCase())
  );
  return `
    <div class="view">
      ${renderLangSwitcher()}
      <div class="header">
        <h1>ğŸ¤ ${t('title')}</h1>
        <p>${t('subtitle')}</p>
      </div>
      <div class="search-bar">
        <input type="text" placeholder="${t('searchPlaceholder')}" value="${escHtml(state.search)}" id="searchInput">
      </div>
      <div class="song-grid">
        ${filtered.map(s => `
          <div class="song-card" data-action="open" data-id="${s.id}">
            <div class="album-art" style="background:${s.gradient}">${s.emoji}</div>
            <div class="title">${escHtml(s.title)}</div>
            <div class="artist">${escHtml(s.artist)}</div>
            ${s.id.startsWith('s') ? '<span class="badge">SAMPLE</span>' : ''}
          </div>
        `).join('')}
        <div class="song-card add-card" data-action="add">
          <div class="plus">+</div>
          <div class="label">${t('addSong')}</div>
        </div>
      </div>
    </div>
  `;
}

function renderEditor() {
  const song = getCurrentSong();
  if (!song) { state.view = 'home'; return renderHome(); }
  const linkLabels = { youtube: 'â–¶ YouTube', spotify: 'ğŸµ Spotify', melon: 'ğŸˆ Melon' };
  return `
    <div class="view">
      <button class="nav-back" data-action="back">${t('backToList')}</button>
      <div class="song-info">
        <div class="art" style="background:${song.gradient}">${song.emoji}</div>
        <div class="meta">
          <h2>${escHtml(song.title)}</h2>
          <div class="artist">${escHtml(song.artist)}</div>
          <div class="links">
            ${Object.entries(song.links||{}).map(([k,v]) => v ? `<a href="${escHtml(v)}" target="_blank" rel="noopener">${linkLabels[k]||k}</a>` : '').join('')}
          </div>
        </div>
      </div>

      <div class="section-label">${t('aiSection')}</div>
      <div class="options-row">
        <button class="option-chip ${state.aiOptions.stretch?'active':''}" data-option="stretch">${t('optStretch')}</button>
        <button class="option-chip ${state.aiOptions.stress?'active':''}" data-option="stress">${t('optStress')}</button>
        <button class="option-chip ${state.aiOptions.rhyme?'active':''}" data-option="rhyme">${t('optRhyme')}</button>
      </div>
      <div class="toolbar">
        <button class="btn btn-primary" data-action="aiGenerate">${t('btnAi')}</button>
        <button class="btn" data-action="karaoke">${t('btnKaraoke')}</button>
        <button class="btn" data-action="addLine">${t('btnAddLine')}</button>
        <button class="btn" data-action="export">${t('btnExport')}</button>
        ${!song.id.startsWith('s') ? '<button class="btn" data-action="deleteSong" style="color:#ff4444">ğŸ—‘</button>' : ''}
      </div>

      <div id="aiStatus"></div>

      <div class="line-header"><span>${t('colOriginal')}</span><span>${t('colPhonetic')}</span></div>
      <div class="lines-container" id="linesContainer">
        ${song.lines.map((l, i) => `
          <div class="line-row" data-idx="${i}">
            <textarea class="original" rows="1" data-field="original" data-idx="${i}">${escHtml(l.original)}</textarea>
            <textarea class="korean" rows="1" placeholder="${t('phoneticPlaceholder')}" data-field="korean" data-idx="${i}">${escHtml(l.korean)}</textarea>
          </div>
        `).join('')}
      </div>
    </div>
  `;
}

function renderAddForm() {
  return `
    <div class="view">
      <button class="nav-back" data-action="back">${t('backToList')}</button>
      <div class="header" style="padding-bottom:8px"><h1>${t('newSongTitle')}</h1></div>
      <div class="form-group">
        <label>${t('addTitle')} *</label>
        <input id="addTitle" placeholder="Shape of You">
      </div>
      <div class="form-group">
        <label>${t('addArtist')} *</label>
        <input id="addArtist" placeholder="Ed Sheeran">
      </div>
      <div class="form-group">
        <label>${t('addYoutube')}</label>
        <input id="addYoutube" placeholder="https://www.youtube.com/watch?v=...">
      </div>
      <div class="form-group">
        <label>${t('addSpotify')}</label>
        <input id="addSpotify" placeholder="https://open.spotify.com/track/...">
      </div>
      <div class="form-group">
        <label>${t('addLyrics')}</label>
        <textarea id="addLyrics" placeholder="Is this the real life?&#10;Is this just fantasy?&#10;Caught in a landslide..."></textarea>
      </div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn btn-primary" data-action="saveSong" style="flex:1">${t('btnRegister')}</button>
        <button class="btn" data-action="back">${t('btnCancel')}</button>
      </div>
    </div>
  `;
}

// --- Events ---
function bindEvents() {
  const app = document.getElementById('app');

  // Search
  const si = document.getElementById('searchInput');
  if (si) si.addEventListener('input', e => { state.search = e.target.value; render(); });

  // Lang switcher
  app.querySelectorAll('.lang-btn').forEach(el => {
    el.addEventListener('click', () => setLang(el.dataset.lang));
  });

  // Click delegation
  app.addEventListener('click', handleClick);

  // Textarea auto-resize + save
  app.querySelectorAll('textarea[data-field]').forEach(ta => {
    autoResize(ta);
    ta.addEventListener('input', e => {
      autoResize(e.target);
      const song = getCurrentSong();
      if (!song) return;
      const idx = +e.target.dataset.idx;
      const field = e.target.dataset.field;
      song.lines[idx][field] = e.target.value;
      saveState();
    });
  });

  // Option chips
  app.querySelectorAll('.option-chip').forEach(el => {
    el.addEventListener('click', () => {
      const opt = el.dataset.option;
      state.aiOptions[opt] = !state.aiOptions[opt];
      el.classList.toggle('active');
    });
  });
}

function handleClick(e) {
  const btn = e.target.closest('[data-action]');
  if (!btn) return;
  const action = btn.dataset.action;

  switch(action) {
    case 'open':
      state.currentSongId = btn.dataset.id;
      state.view = 'editor';
      render();
      break;
    case 'back':
      state.view = 'home';
      render();
      break;
    case 'add':
      state.view = 'add';
      render();
      break;
    case 'karaoke':
      openKaraoke();
      break;
    case 'aiGenerate':
      aiGenerate();
      break;
    case 'addLine':
      addLine();
      break;
    case 'export':
      openExport();
      break;
    case 'saveSong':
      saveSong();
      break;
    case 'deleteSong':
      deleteSong();
      break;
  }
}

function autoResize(ta) {
  ta.style.height = 'auto';
  ta.style.height = ta.scrollHeight + 'px';
}

// --- Actions ---
function addLine() {
  const song = getCurrentSong();
  if (!song) return;
  song.lines.push({ original: '', korean: '' });
  saveState();
  render();
  // Focus last korean input
  setTimeout(() => {
    const all = document.querySelectorAll('.korean');
    if (all.length) all[all.length-1].focus();
  }, 50);
}

function saveSong() {
  const title = document.getElementById('addTitle').value.trim();
  const artist = document.getElementById('addArtist').value.trim();
  if (!title || !artist) { toast(t('toastRequired')); return; }
  const lyrics = document.getElementById('addLyrics').value.trim();
  const lines = lyrics ? lyrics.split('\n').filter(l => l.trim()).map(l => ({ original: l.trim(), korean: '' })) : [{ original: '', korean: '' }];
  const emojis = ['ğŸµ','ğŸ¶','ğŸ¹','ğŸ·','ğŸº','ğŸ¥','ğŸ»','ğŸª—','ğŸ™ï¸','ğŸ§'];
  const gradients = [
    'linear-gradient(135deg,#667eea,#764ba2)',
    'linear-gradient(135deg,#f093fb,#f5576c)',
    'linear-gradient(135deg,#4facfe,#00f2fe)',
    'linear-gradient(135deg,#43e97b,#38f9d7)',
    'linear-gradient(135deg,#fa709a,#fee140)',
  ];
  const song = {
    id: 'u' + Date.now(),
    title, artist,
    emoji: emojis[Math.floor(Math.random()*emojis.length)],
    gradient: gradients[Math.floor(Math.random()*gradients.length)],
    links: {
      youtube: document.getElementById('addYoutube').value.trim() || null,
      spotify: document.getElementById('addSpotify').value.trim() || null,
    },
    lines
  };
  state.songs.unshift(song);
  saveState();
  state.currentSongId = song.id;
  state.view = 'editor';
  render();
  toast(t('toastRegistered'));
}

function deleteSong() {
  if (!confirm(t('confirmDelete'))) return;
  state.songs = state.songs.filter(s => s.id !== state.currentSongId);
  saveState();
  state.view = 'home';
  render();
  toast(t('toastDeleted'));
}

// --- AI Generation ---
async function aiGenerate() {
  const song = getCurrentSong();
  if (!song) return;
  const originals = song.lines.map(l => l.original).filter(l => l.trim());
  if (!originals.length) { toast(t('toastNoLyrics')); return; }

  const statusEl = document.getElementById('aiStatus');
  statusEl.innerHTML = `<div class="ai-loading"><div class="spinner"></div>${t('aiLoading')}</div>`;

  const PHONETIC_PROMPTS = {
    ko: {
      instruction: 'ë‹¤ìŒ ê°€ì‚¬ë¥¼ í•œêµ­ì–´ ë°œìŒ(ëŠë‚Œê°€ì‚¬)ìœ¼ë¡œ ë³€í™˜í•´ì¤˜.',
      rules: '- ë°œìŒì„ í•œê¸€ë¡œ ìµœëŒ€í•œ ìì—°ìŠ¤ëŸ½ê²Œ í‘œê¸°\n- ë…¸ë˜ ë¶€ë¥¼ ë•Œ ë¦¬ë“¬ì— ë§ê²Œ ìŒì ˆ ìˆ˜ ì¡°ì ˆ\n- ì›ë¬¸ì˜ ëŠë‚Œì„ ì‚´ë ¤ì„œ ë³€í™˜',
      stretch: '- ìŒì ˆì„ ì•½ê°„ ëŠ˜ë ¤ì„œ ë” ë¶€ë¥´ê¸° ì‰½ê²Œ (ì˜ˆ: "love" â†’ "ëŸ¬~ë¸Œ")',
      stress: '- ê°•ì„¸ê°€ ìˆëŠ” ìŒì ˆì€ ~ë¡œ ê°•ì¡° í‘œì‹œ',
      rhyme: '- í•œêµ­ì–´ì—ì„œë„ ë¼ì„/ìš´ìœ¨ì´ ëŠê»´ì§€ë„ë¡ ë°œìŒ ì¡°ì •',
      example: 'ì˜ˆ: "I love you" â†’ "ì•„ì´ ëŸ¬ë¸Œ ìœ "',
    },
    en: {
      instruction: 'Convert the following lyrics into English phonetic approximation.',
      rules: '- Write pronunciation using English alphabet, as naturally singable as possible\n- Match rhythm and syllable count of the original\n- Preserve the feel of the original',
      stretch: '- Stretch syllables for easier singing (e.g., "ì‚¬ë‘" â†’ "saa-rang~")',
      stress: '- Mark stressed syllables with ~ or caps',
      rhyme: '- Adjust phonetics so English rhymes/flow feel natural',
      example: 'e.g., "ì‚¬ë‘í•´" â†’ "sa-rang-hae"',
    },
    ja: {
      instruction: 'æ¬¡ã®æ­Œè©ã‚’ã‚«ã‚¿ã‚«ãƒŠã®ç™ºéŸ³è¡¨è¨˜ã«å¤‰æ›ã—ã¦ãã ã•ã„ã€‚',
      rules: '- ã‚«ã‚¿ã‚«ãƒŠã§æœ€ã‚‚è‡ªç„¶ãªç™ºéŸ³è¡¨è¨˜ã«ã™ã‚‹\n- æ­Œã®ãƒªã‚ºãƒ ã«åˆã‚ã›ã¦éŸ³ç¯€æ•°ã‚’èª¿æ•´\n- åŸæ–‡ã®é›°å›²æ°—ã‚’æ´»ã‹ã™',
      stretch: '- éŸ³ç¯€ã‚’ä¼¸ã°ã—ã¦æ­Œã„ã‚„ã™ãï¼ˆä¾‹: "love" â†’ "ãƒ©ã€œãƒ´"ï¼‰',
      stress: '- ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã®ã‚ã‚‹éŸ³ç¯€ã¯ã€œã§å¼·èª¿',
      rhyme: '- æ—¥æœ¬èªã§ã‚‚ãƒ©ã‚¤ãƒ ãƒ»éŸ»ã‚’æ„Ÿã˜ã‚‰ã‚Œã‚‹ã‚ˆã†ã«èª¿æ•´',
      example: 'ä¾‹: "I love you" â†’ "ã‚¢ã‚¤ ãƒ©ãƒ´ ãƒ¦ãƒ¼"',
    },
    'zh-TW': {
      instruction: 'å°‡ä»¥ä¸‹æ­Œè©è½‰æ›ç‚ºä¸­æ–‡è«§éŸ³ï¼ˆç”¨ä¸­æ–‡å­—æ¨¡æ“¬ç™¼éŸ³ï¼‰ã€‚',
      rules: '- ç”¨ä¸­æ–‡å­—ä¾†æ¨¡æ“¬å¤–èªç™¼éŸ³ï¼Œç›¡é‡è‡ªç„¶\n- é…åˆæ­Œæ›²ç¯€å¥èª¿æ•´éŸ³ç¯€\n- ä¿ç•™åŸæ–‡çš„æ„Ÿè¦º',
      stretch: '- é©ç•¶å»¶é•·éŸ³ç¯€è®“æ¼”å”±æ›´é †ï¼ˆä¾‹: "love" â†’ "æ‹‰ï½å¤«"ï¼‰',
      stress: '- é‡éŸ³éŸ³ç¯€ç”¨ï½æ¨™è¨˜',
      rhyme: '- èª¿æ•´è«§éŸ³è®“ä¸­æ–‡ä¹Ÿæœ‰æŠ¼éŸ»æ„Ÿ',
      example: 'ä¾‹: "I love you" â†’ "æ„› æ‹‰å¤« æ²¹"',
    },
  };

  const pp = PHONETIC_PROMPTS[currentLang] || PHONETIC_PROMPTS.ko;
  let optionText = '';
  if (state.aiOptions.stretch) optionText += '\n' + pp.stretch;
  if (state.aiOptions.stress) optionText += '\n' + pp.stress;
  if (state.aiOptions.rhyme) optionText += '\n' + pp.rhyme;

  const prompt = `${pp.instruction}
ê·œì¹™/Rules:
${pp.rules}${optionText}

${pp.example}

í˜•ì‹/Format: ë°˜ë“œì‹œ JSON ë°°ì—´ë¡œë§Œ ì‘ë‹µ (ë‹¤ë¥¸ í…ìŠ¤íŠ¸ ì—†ì´):
[{"original":"ì›ë¬¸","korean":"ë°œìŒí‘œê¸°"},...]

ê°€ì‚¬/Lyrics:
${originals.map((l,i) => `${i+1}. ${l}`).join('\n')}`;

  try {
    const res = await fetch(LLM_URL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ model: 'spark', messages: [{ role: 'user', content: prompt }] })
    });
    const data = await res.json();
    const text = data.choices?.[0]?.message?.content || '';

    // Robust parse: strip think tags, find JSON
    let cleaned = text.replace(/<think>[\s\S]*?<\/think>/g, '').trim();
    const jsonMatch = cleaned.match(/\[[\s\S]*\]/);
    if (!jsonMatch) throw new Error('AI ì‘ë‹µ íŒŒì‹± ì‹¤íŒ¨');
    const result = JSON.parse(jsonMatch[0]);

    // Apply results
    result.forEach((r, i) => {
      if (i < song.lines.length && r.korean) {
        song.lines[i].korean = r.korean;
      }
    });
    saveState();
    statusEl.innerHTML = '';
    render();
    toast(t('toastAiDone'));
  } catch(err) {
    statusEl.innerHTML = `<div style="color:#ff4444;text-align:center;padding:12px;font-size:0.85rem">${t('aiFailed')}: ${escHtml(err.message)}<br><span style="color:var(--text-dim)">${t('aiRetry')}</span></div>`;
  }
}

// --- Karaoke ---
function openKaraoke() {
  const song = getCurrentSong();
  if (!song || !song.lines.length) return;
  const nonEmpty = song.lines.filter(l => l.korean.trim());
  if (!nonEmpty.length) { toast(t('toastNoPhonetic')); return; }
  state.karaokeIndex = 0;
  renderKaraoke(song, nonEmpty);
}

function renderKaraoke(song, lines) {
  const overlay = document.getElementById('karaoke');
  const i = state.karaokeIndex;
  const line = lines[Math.min(i, lines.length - 1)];
  const done = i >= lines.length;

  overlay.innerHTML = `
    <button class="k-close" id="kClose">âœ•</button>
    ${done ? `
      <div class="k-korean" style="font-size:1.8rem">${t('karaokeEnd')}</div>
      <div class="k-progress">${t('karaokeTapBack')}</div>
    ` : `
      <div class="k-original">${escHtml(line.original)}</div>
      <div class="k-korean">${escHtml(line.korean)}</div>
      <div class="k-progress">${i+1} / ${lines.length}</div>
      <div class="k-hint">${t('karaokeHint')}</div>
    `}
  `;
  overlay.classList.add('active');
  document.body.style.overflow = 'hidden';

  const close = () => {
    overlay.classList.remove('active');
    document.body.style.overflow = '';
    overlay.removeEventListener('click', advance);
    document.removeEventListener('keydown', keyHandler);
  };

  const advance = (e) => {
    if (e.target.id === 'kClose') { close(); return; }
    if (done) { close(); return; }
    state.karaokeIndex++;
    renderKaraoke(song, lines);
  };

  const keyHandler = (e) => {
    if (e.key === 'Escape') { close(); return; }
    if (e.key === 'ArrowRight' || e.key === ' ') { e.preventDefault(); advance(e); }
    if (e.key === 'ArrowLeft' && state.karaokeIndex > 0) {
      e.preventDefault(); state.karaokeIndex--; renderKaraoke(song, lines);
    }
  };

  // Re-attach (previous listeners removed by innerHTML replacement)
  setTimeout(() => {
    overlay.addEventListener('click', advance);
    document.addEventListener('keydown', keyHandler);
    document.getElementById('kClose').addEventListener('click', close);
  }, 10);
}

// --- Export ---
function openExport() {
  const song = getCurrentSong();
  if (!song) return;
  const text = `${song.title} â€” ${song.artist}\n${'â”€'.repeat(30)}\n\n` +
    song.lines.map(l => `${l.original}\n${l.korean || t('notEntered')}\n`).join('\n');

  const modal = document.getElementById('exportModal');
  modal.innerHTML = `
    <div class="modal-box">
      <h3>${t('exportTitle')}</h3>
      <pre id="exportText">${escHtml(text)}</pre>
      <div class="modal-actions">
        <button class="btn btn-primary" id="copyBtn">${t('exportCopy')}</button>
        <button class="btn" id="closeExport">${t('exportClose')}</button>
      </div>
    </div>
  `;
  modal.classList.add('active');

  document.getElementById('copyBtn').addEventListener('click', () => {
    navigator.clipboard.writeText(text).then(() => toast(t('toastCopied'))).catch(() => {
      const ta = document.createElement('textarea');
      ta.value = text; document.body.appendChild(ta); ta.select();
      document.execCommand('copy'); document.body.removeChild(ta);
      toast(t('toastCopied'));
    });
  });
  document.getElementById('closeExport').addEventListener('click', () => modal.classList.remove('active'));
  modal.addEventListener('click', e => { if (e.target === modal) modal.classList.remove('active'); });
}

// --- Util ---
function escHtml(s) {
  if (!s) return '';
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

// --- Init ---
loadState();
render();
</script>
</body>
</html>
